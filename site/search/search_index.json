{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"RepChain V2.0","text":"<p>RepChain V2.0\u529f\u80fd\u4ecb\u7ecd\u53ca\u5b89\u88c5\u90e8\u7f72</p> <p>\u7acb\u523b\u8fdb\u5165</p>"},{"location":"RepChain-2.0/","title":"\u529f\u80fd\u4ecb\u7ecd","text":""},{"location":"RepChain-2.0/#_1","title":"\u591a\u94fe\u534f\u540c","text":""},{"location":"RepChain-2.0/#_2","title":"\u5e94\u7528\u6a21\u5f0f","text":"<ul> <li> <p>\u5355\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u540c\u65f6\u8d1f\u8d23\u4e1a\u52a1</p> <p></p> <p>1.\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u7684levelDB</p> <p>2.\u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo</code>\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09</p> <p>\u4f7f\u7528\u793a\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did</p> </li> <li> <p>\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1</p> <p></p> <p>1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>rep.utils.CreateGenesisInfo4NoTransaction</code>\uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>json/credence-net/genesis.json</code>\uff08\u4e1a\u52a1\u94fe\uff09</p> <p>\u4f7f\u7528\u793a\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/MultiChainTest.java</p> </li> <li> <p>\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1</p> <p></p> <p>1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.identity.CreateIdentityGenesisInfo</code> \uff08\u8eab\u4efd\u94fe\uff09 \u548c<code>rep.utils.credence.CreateCredenceGenesisInfo</code>\uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>json/credence-net/genesis.json</code>\uff08\u4e1a\u52a1\u94fe\uff09</p> <p>\u4f7f\u7528\u793a\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/MultiChainSeparateTest.java</p> </li> </ul> <p>\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\u6240\u793a\uff0c<code>identity-net</code>\u4e3a\u8eab\u4efd\u94fe\u6807\u8bc6\uff0c<code>credence-net</code>\u4e3a\u4e1a\u52a1\u94fe\u6807\u8bc6\uff0cnode1\u53c2\u4e0e\u8eab\u4efd\u94fe\u7ec4\u7f51\uff0cnode6\u53c2\u4e0e\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0cnode1\u548cnode6\u7684LevelDB\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff0cnode6\u7684<code>basic_chain_id</code>\u4e3a\u8eab\u4efd\u94fe\uff1a</p> <pre><code>// \u8eab\u4efd\u94fe\u53c2\u8003conf/121000005l35120456.node1/system.conf\nsystem {\nchain_network_id = \"identity-net\" #\u7ec4\u7f51id\uff0c\u7ec4\u7f51id\u7684\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26\nbasic_chain_id = \"identity-net\"   #\u8d26\u6237\u3001\u8bc1\u4e66\u8eab\u4efd\u5168\u90e8\u4ea4\u7531\u81ea\u5df1\u7ba1\u7406\n}\nstorage {\ndb_type = \"LevelDB\" #\u652f\u6301\u6570\u636e\u5e93\u7684\u7c7b\u578b\uff1aLevelDB\u3001RocksDB\ndb_path = \"./repchaindata/data/leveldbdata\"\ndb_name = \"215159697776981712.node1\"\ndb_cache_size=48 #\u6570\u636e\u5e93\u8bfb\u5199\u7f13\u5b58\uff0c\u5355\u4f4d\u4e3aM\nblock_file_type = \"localFileSystem\"\nblock_file_path = \"./repchaindata/data/blockdata\"\nblock_file_name = \"215159697776981712.node1\"\nfile_max_length = 100 #\u5355\u4f4d\u4e3aM\n}\n</code></pre> <pre><code>// \u4e1a\u52a1\u94fe\u53c2\u8003conf/330597659476689954.node6/system.conf\nsystem {\nchain_network_id = \"credence-net\" #\u7ec4\u7f51id\uff0c\u7ec4\u7f51id\u7684\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26\nbasic_chain_id = \"identity-net\"   #\u8d26\u6237\u3001\u8bc1\u4e66\u4ea4\u7531identity-net\u7ba1\u7406\n}\nstorage {\ndb_type = \"LevelDB\" #\u652f\u6301\u6570\u636e\u5e93\u7684\u7c7b\u578b\uff1aLevelDB\u3001RocksDB\ndb_path = \"./repchaindata/data/leveldbdata\"\ndb_name = \"215159697776981712.node1\"\ndb_cache_size=48 #\u6570\u636e\u5e93\u8bfb\u5199\u7f13\u5b58\uff0c\u5355\u4f4d\u4e3aM\nblock_file_type = \"localFileSystem\"\nblock_file_path = \"./repchaindata/data/blockdata\"\nblock_file_name = \"215159697776981712.node1\"\nfile_max_length = 100 #\u5355\u4f4d\u4e3aM\n}\n</code></pre>"},{"location":"RepChain-2.0/#_3","title":"\u5185\u5bb9\u76d1\u7ba1","text":""},{"location":"RepChain-2.0/#_4","title":"\u6574\u4f53\u67b6\u6784","text":"<ul> <li>\u67b6\u6784\u56fe</li> </ul> <ul> <li> <p>\u67b6\u6784\u8bf4\u660e</p> <ul> <li> <p>\u5148\u51b3\u6761\u4ef6</p> <ol> <li>\u94fe\u8fd0\u884c\u6b63\u5e38</li> <li>\u94fe\u7ba1\u7406\u5458\u5df2\u90e8\u7f72\u76d1\u7ba1\u5408\u7ea6\u5e76\u6ce8\u518c\u76f8\u5173\u64cd\u4f5c</li> <li>\u76d1\u7ba1\u8282\u70b9\u8d26\u6237\u5df2\u6ce8\u518c</li> <li>\u76d1\u7ba1\u8282\u70b9\u5df2\u83b7\u5f97\u5165\u7f51\u8bb8\u53ef</li> <li>\u94fe\u7ba1\u7406\u5458\u5df2\u6388\u4e88\u76d1\u7ba1\u65b9\u8c03\u7528\u76d1\u7ba1\u5408\u7ea6\u7684\u6743\u9650</li> </ol> </li> <li> <p>\u76d1\u7ba1\u670d\u52a1</p> <ol> <li>\u76d1\u7ba1\u8282\u70b9\u914d\u7f6e\u76f8\u5173\u76d1\u7ba1\u53c2\u6570</li> <li>\u542f\u52a8\u76d1\u7ba1\u8282\u70b9\uff0c\u540c\u65f6\u6839\u636e\u76f8\u5173\u914d\u7f6e\u81ea\u52a8\u542f\u52a8\u76d1\u7ba1\u670d\u52a1</li> <li>\u76d1\u7ba1\u8282\u70b9\u540c\u6b65\u94fe\u4e0a\u6570\u636e\u5230\u672c\u5730\u8282\u70b9</li> <li>\u76d1\u7ba1\u670d\u52a1\u6bcf\u9694\u4e00\u5b9a\u65f6\u95f4\u9010\u5757\u62c9\u53d6\u533a\u5757\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u8fdd\u89c4\u5185\u5bb9\u5ba1\u67e5\u5e93</li> <li>\u82e5\u4ea4\u6613\u5185\u5bb9\u5408\u89c4\uff0c\u5219\u5ffd\u7565</li> <li>\u82e5\u4ea4\u6613\u5185\u5bb9\u8fdd\u89c4\uff0c\u5efa\u7acb\u8fdd\u89c4\u76d1\u7ba1\u4ea4\u6613\u5e76\u5411\u94fe\u6210\u5458\u5e7f\u64ad</li> <li>\u5171\u8bc6\u8282\u70b9\u6267\u884c\u8fdd\u89c4\u76d1\u7ba1\u4ea4\u6613\uff0c\u6253\u5305\u51fa\u5757\uff0c\u5c06\u76f8\u5173\u8fdd\u89c4\u6570\u636e\u5199\u5165\u72b6\u6001\u5e93\uff08levelDB\uff09</li> <li>\u76d1\u7ba1\u65b9\u4e5f\u53ef\u624b\u52a8\u6784\u5efa\u76d1\u7ba1\u4ea4\u6613\uff0c\u901a\u8fc7API\u63d0\u4ea4\u76d1\u7ba1\u4ea4\u6613\u8fdb\u884c\u6570\u636e\u76d1\u7ba1</li> </ol> </li> <li> <p>\u8fdd\u89c4\u8fc7\u6ee4</p> <ol> <li>\u666e\u901a\u7528\u6237\u8c03\u7528\u67e5\u8be2\u63a5\u53e3</li> <li>API\u63a5\u6536\u67e5\u8be2\u8bf7\u6c42\uff0c\u901a\u8fc7BlockSearcher\u67e5\u51fa\u533a\u5757\u6216\u4ea4\u6613\u5185\u5bb9</li> <li>\u8c03\u7528\u8fdd\u89c4\u5185\u5bb9\u8fc7\u6ee4\u5de5\u5177\u7c7b\u5bf9\u67e5\u8be2\u5185\u5bb9\u8fdb\u884c\u8fc7\u6ee4</li> <li>\u82e5\u533a\u5757\u4e0d\u542b\u8fdd\u89c4\u4ea4\u6613\uff0c\u76f4\u63a5\u8fd4\u56de\u539f\u533a\u5757</li> <li>\u82e5\u533a\u5757\u542b\u6709\u8fdd\u89c4\u4ea4\u6613\uff0c\u5faa\u73af\u68c0\u67e5\u533a\u5757\u4e2d\u7684\u6240\u6709\u4ea4\u6613\uff0c\u5c06\u8fdd\u89c4\u4ea4\u6613\u7684\u4ea4\u6613\u53c2\u6570\u7528\u4ea4\u6613id\u548c\u4ea4\u6613\u54c8\u5e0c\u66ff\u6362</li> <li>\u5411API\u5c42\u8fd4\u56de\u8fc7\u6ee4\u540e\u7684\u533a\u5757</li> <li>API\u5c42\u5411\u7528\u6237\u8fd4\u56de\u8fc7\u6ee4\u540e\u7684\u5185\u5bb9</li> </ol> </li> </ul> </li> </ul>"},{"location":"RepChain-2.0/#_5","title":"\u76d1\u7ba1\u5408\u7ea6","text":"<ul> <li> <p>RegulateTPL\u5408\u7ea6\u65b9\u6cd5\u8bf4\u660e</p> <ul> <li>regBlocks</li> <li> <p>\u53c2\u6570\u8bf4\u660e\uff1aregBlocks\u65b9\u6cd5\u53c2\u6570\u7c7b\u578b\u4e3aSeq[Conclusion]\uff0cSeq\u4e2d\u7684\u4e00\u4e2aConclusion\u5143\u7d20\u4ee3\u8868\u76d1\u7ba1\u7684\u4e00\u4e2a\u533a\u5757\u4fe1\u606f\uff0c\u5176\u4e2dheight\u4e3a\u76d1\u7ba1\u7684\u533a\u5757\u9ad8\u5ea6\uff0cblockHash\u4e3a\u533a\u5757hash\uff0cillegalTrans*\u4e3a\u5bf9\u5e94\u533a\u5757\u4e2d\u7684\u8fdd\u89c4\u4ea4\u6613\uff0c\u5176\u4e2dkey\u4e3a\u4ea4\u6613ID\uff0cvalue\u4e3a\u8fdd\u89c4\u539f\u56e0   </p> </li> <li> <p>\u65b9\u6cd5\u8bf4\u660e\uff1a \u6267\u884cregBlocks\u65b9\u6cd5\u65f6\uff0c\u904d\u5386Seq\u4e2d\u7684\u5143\u7d20\uff0c\u7136\u540e\u518d\u904d\u5386\u533a\u5757\u4e2d\u7684\u4ea4\u6613\uff0c\u5206\u522b\u5c06\u8fdd\u89c4\u4ea4\u6613\u5199\u5165\u72b6\u6001\u5e93\u540e\u518d\u5c06\u533a\u5757\u4fe1\u606f\u5199\u5165\u72b6\u6001\u5e93   </p> </li> </ul> </li> </ul>"},{"location":"RepChain-2.0/#_6","title":"\u76d1\u7ba1\u670d\u52a1","text":"<p>AICensor - \u76d1\u7ba1\u670d\u52a1\u7c7b</p> <ul> <li> <p>\u670d\u52a1\u542f\u52a8</p> <ul> <li>AICensor\u7ee7\u627f\u81eaModuleBase\u62bd\u8c61\u7c7b\uff0c\u5f53\u8282\u70b9\u914d\u7f6e\u4e3a\u76d1\u7ba1\u8282\u70b9\uff0c\u5373is_censor=true\u65f6\u542f\u52a8\uff0c\u7531IModuleManager\u52a0\u8f7d    </li> </ul> </li> <li> <p>\u8f6e\u8be2</p> <ul> <li>\u76d1\u7ba1\u670d\u52a1\u9996\u6b21\u542f\u52a860\u79d2\u540e\u5411\u81ea\u5df1\u53d1\u9001\u6d88\u606f\uff0c\u670d\u52a1\u6536\u5230\u6d88\u606f\u65f6\u5148\u68c0\u67e5\u5f53\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u662f\u5426\u6ee1\u8db3\u6295\u7968\u8981\u6c42\uff0c\u4e0d\u6ee1\u8db3\u8fdb\u5165\u4e0b\u4e00\u6b21\u8f6e\u8be2\uff0c\u76f4\u5230\u7cfb\u7edf\u53ef\u7528\u3002    </li> </ul> </li> <li> <p>\u76d1\u7ba1</p> <ul> <li>\u83b7\u53d6\u5f53\u524d\u94fe\u7684\u9ad8\u5ea6\u4e0e\u5df2\u5ba1\u67e5\u9ad8\u5ea6\u6bd4\u8f83\uff0c\u5f53\u94fe\u9ad8\u5ea6\u5927\u4e8e\u5df2\u5ba1\u67e5\u9ad8\u5ea6\u65f6\u5faa\u73af\u67e5\u8be2\u51fa\u672a\u5ba1\u67e5\u533a\u5757\u4f9d\u6b21\u8fdb\u884c\u5ba1\u67e5\uff0c\u82e5\u5ba1\u67e5\u5931\u8d25\uff0c\u5219\u7ed3\u675f\u672c\u8f6e\u5ba1\u67e5\uff0c\u7b49\u5f85\u4e0b\u4e00\u8f6e\u6d88\u606f\u3002\u521d\u59cb\u5ba1\u67e5\u9ad8\u5ea6\u53ef\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e</li> </ul> <p></p> <ul> <li>\u5bf9\u5355\u4e2a\u533a\u5757\u8fdb\u884c\u5ba1\u67e5\u3002\u904d\u5386\u533a\u5757\u4e2d\u7684\u4ea4\u6613\uff0c\u4f9d\u6b21\u5bf9\u4ea4\u6613\u5185\u5bb9\u8fdb\u884c\u5408\u89c4\u5ba1\u67e5\u3002\u82e5\u5b58\u5728\u8fdd\u89c4\u5185\u5bb9\uff0c\u5efa\u7acb\u8fdd\u89c4\u76d1\u7ba1\u4ea4\u6613\uff0c\u5e7f\u64ad\u4ea4\u6613\u3002\u5ba1\u67e5\u6210\u529f\u8fd4\u56decode=0\uff0c\u5ba1\u67e5\u5931\u8d25\u8fd4\u56de\u975e0</li> </ul> <p></p> <ul> <li>\u7b2c\u4e09\u65b9\u5ba1\u67e5\u3002\u8c03\u7528\u7b2c\u4e09\u65b9\u5185\u5bb9\u5ba1\u67e5\u63a5\u53e3\u5bf9\u4ea4\u6613\u5185\u5bb9\u8fdb\u884c\u5408\u89c4\u5ba1\u67e5\uff0c\u5904\u7406\u5ba1\u67e5\u7ed3\u679c</li> </ul> <p></p> <ul> <li>\u4ea4\u6613\u6c60\u72b6\u6001\u68c0\u67e5\u3002\u82e5\u5f53\u524d\u4ea4\u6613\u6c60\u5df2\u6ee1\uff0c\u7b49\u5f855\u79d2\u540e\u518d\u6b21\u68c0\u67e5\uff0c\u76f4\u5230\u4ea4\u6613\u6c60\u72b6\u6001\u53ef\u7528\u6216\u4e09\u6b21\u68c0\u67e5\u7ed3\u675f   </li> </ul> </li> </ul>"},{"location":"RepChain-2.0/#_7","title":"\u8fdd\u89c4\u4ea4\u6613\u8fc7\u6ee4","text":"<ul> <li> <p>DataFilter - \u8fdd\u89c4\u68c0\u67e5\u5de5\u5177\u7c7b</p> <ul> <li>function filterBlock <p>\u5f53\u5f00\u542f\u6570\u636e\u8fc7\u6ee4\u65f6\uff0c\u8be5\u65b9\u6cd5\u4f1a\u5148\u68c0\u67e5\u4f20\u5165\u7684\u533a\u5757\u662f\u5426\u542b\u6709\u8fdd\u89c4\u4ea4\u6613\uff0c\u82e5\u65e0\u8fdd\u89c4\uff0c\u8fd4\u56de\u539f\u533a\u5757\u3002\u82e5\u6709\u8fdd\u89c4\uff0c\u5219\u904d\u5386\u533a\u5757\u4e2d\u7684\u4ea4\u6613\uff0c\u4f9d\u6b21\u68c0\u67e5\u4ea4\u6613\u662f\u5426\u8fdd\u89c4\uff0c\u8c03\u7528filterTran\u65b9\u6cd5\u8fc7\u6ee4\u8fdd\u89c4\u4ea4\u6613\uff0c\u6700\u540e\u8fd4\u56de\u8fc7\u6ee4\u540e\u7684\u533a\u5757   </p> </li> <li>function checkBlock <p>\u67e5\u8be2\u72b6\u6001\u5e93\uff0c\u5224\u65ad\u533a\u5757\u662f\u5426\u8fdd\u89c4\u3002\u8fdd\u89c4\uff1areturn true\uff1b\u4e0d\u8fdd\u89c4\uff1areturn false   </p> </li> <li>function filterTransaction <p>\u5f53\u5f00\u542f\u6570\u636e\u8fc7\u6ee4\u65f6\uff0c\u8be5\u65b9\u6cd5\u4f1a\u5148\u68c0\u67e5\u4f20\u5165\u7684\u4ea4\u6613\u662f\u5426\u8fdd\u89c4\uff0c\u4e0d\u8fdd\u89c4\uff0c\u8fd4\u56de\u539f\u4ea4\u6613\uff0c\u8fdd\u89c4\u5219\u8c03\u7528filterTran\u65b9\u6cd5\u8fc7\u6ee4\u8fdd\u89c4\u5185\u5bb9\uff0c\u8fd4\u56de\u8fc7\u6ee4\u540e\u7684\u4ea4\u6613   </p> </li> <li> <p>function checkTransaction</p> <p>\u67e5\u8be2\u72b6\u6001\u5e93\uff0c\u5224\u65ad\u4ea4\u6613\u662f\u5426\u8fdd\u89c4\u3002\u8fdd\u89c4\uff0creturn true\uff1b\u4e0d\u8fdd\u89c4\uff0creturn false   </p> </li> <li> <p>function filterTran</p> <p>\u79c1\u6709\u65b9\u6cd5\uff0c\u4f7f\u7528\u4ea4\u6613ID\u548c\u4ea4\u6613hash\u66ff\u6362\u4ea4\u6613\u53c2\u6570   </p> </li> </ul> </li> <li> <p>API\u5c42\u8fc7\u6ee4</p> <ul> <li>API\u5c42\u8c03\u7528DataFilter.filterBlock\u6216DataFilterTransaction()   \u65b9\u6cd5\u5bf9\u67e5\u8be2\u51fa\u7684\u533a\u5757\u548c\u4ea4\u6613\u8fc7\u6ee4\u8fdd\u89c4\u5185\u5bb9\u540e\u518d\u8fd4\u56de\u7ed9\u7528\u6237    </li> </ul> </li> </ul>"},{"location":"RepChain-2.0/#_8","title":"\u6d4b\u8bd5","text":"<p>DataFilterTest</p> <ul> <li> <p>\u6d4b\u8bd5\u6d41\u7a0b   \u8dd1\u6d4b\u8bd5\u65f6\u76f4\u63a5\u8fd0\u884cDataFilterTest\uff0c\u4e0d\u8981\u5355\u72ec\u8fd0\u884c\u67d0\u4e2a\u6d4b\u8bd5</p> <ul> <li>\u90e8\u7f72ContractAssetsTPL\u5408\u7ea6\u3002\uff08\u53ea\u662f\u4e3a\u4e86\u8c03\u7528putProof\u4e0a\u94fe\u8fdd\u89c4\u5185\u5bb9\uff0c\u65e0\u5176\u5b83\u7528\u5904\uff09   </li> <li>\u90e8\u7f72RegulateTPL\u5408\u7ea6   </li> <li>\u63d0\u4ea4\u5305\u542b\u8fdd\u89c4\u5185\u5bb9\u7684\u4ea4\u6613\u3002\u8bb0\u5f55\u8be5\u8fdd\u89c4\u4ea4\u6613\u6240\u5728\u533a\u5757\u9ad8\u5ea6\u3001\u533a\u5757hash\u3001\u8fdd\u89c4\u4ea4\u6613ID   </li> <li>\u63d0\u4ea4\u8fdd\u89c4\u76d1\u7ba1\u4ea4\u6613\uff0c\u5bf9\u8fdd\u89c4\u4ea4\u6613\u8fdb\u884c\u76d1\u7ba1\u3002\u53c2\u6570\u4e3a\u201c3\u201d\u4e2d\u8bb0\u5f55\u7684\"illegal_tid\"\u3001\"illegal_block_height\"\u3001\"illegal_block_hash\"   </li> <li> <p>\u9a8c\u8bc1DataFilter</p> <ul> <li>\u8c03\u7528BlockSearcher.getBlockByHeight\u65b9\u6cd5\u83b7\u53d6\u201c3\u201d\u4e2d\u8fdd\u89c4\u4ea4\u6613\u6240\u5728\u7684\u539f\u59cb\u533a\u5757</li> <li>\u7b5b\u9009\u51fa\u8be5\u533a\u5757\u4e2d\u7684\u539f\u59cb\u8fdd\u89c4\u4ea4\u6613</li> <li>\u8ba1\u7b97\u51fa\u8be5\u4ea4\u6613\u7684hash\u503c</li> <li>\u8c03\u7528DataFilter.filterBlock\u65b9\u6cd5\u8fc7\u6ee4\u533a\u5757\uff0c\u5f97\u5230\u8fc7\u6ee4\u540e\u7684\u533a\u5757\"blockAfterFilter\"</li> <li>\u8c03\u7528DataFilter.filterTransaction\u65b9\u6cd5\u8fc7\u6ee4\u539f\u59cb\u4ea4\u6613\uff0c\u5f97\u5230\u8fc7\u6ee4\u540e\u7684\u4ea4\u6613\"tranAfterFilter\"</li> <li>\"tranAfterFilter\"\u7684\u7b2c\u4e00\u4e2a\u4ea4\u6613\u53c2\u6570\u5e94\u8be5\u548c\u4ea4\u6613ID\u76f8\u7b49</li> <li>\"tranAfterFilter\"\u7684\u7b2c\u4e8c\u4e2a\u4ea4\u6613\u53c2\u6570\u5e94\u8be5\u548c\u539f\u59cb\u4ea4\u6613\u7684hash\u503c\u76f8\u7b49</li> <li>\u6d4b\u8bd5\u901a\u8fc7\uff0c\u8bf4\u660e\u8fdd\u89c4\u4ea4\u6613\u7684\u5185\u5bb9\u5df2\u88ab\u66ff\u6362\u4ea4\u6613ID\u548c\u4ea4\u6613hash\u503c</li> <li>\u4ece\"blockAfterFilter\"\u4e2d\u53d6\u51fa\u8fdd\u89c4\u4ea4\u6613\uff0c\u7528\u76f8\u540c\u7684\u65b9\u6cd5\u9a8c\u8bc1\u8be5\u4ea4\u6613\u7684\u53c2\u6570\u5185\u5bb9\uff0c\u540c\u6837\u88ab\u66ff\u6362\u6210\u4e86\u4ea4\u6613ID\u548c\u4ea4\u6613\u7684hash\u503c</li> <li>\u6d4b\u8bd5\u8868\u660eDataFilter.filterBlock\u548cDataFilter.filterTransaction\u65b9\u6cd5\u751f\u6548        </li> </ul> </li> </ul> </li> </ul>"},{"location":"RepChain-2.0/#_9","title":"\u672f\u8bed","text":"<ul> <li>\u8d26\u6237</li> </ul> <p>\u7528\u6237\u8981\u4f7f\u7528\u533a\u5757\u94fe\uff0c\u5fc5\u987b\u5148\u5728RepChain\u4e0a\u6ce8\u518c\u4e00\u4e2a\u8d26\u6237\u3002</p> <ul> <li>\u8bc1\u4e66</li> </ul> <p>\u88abRepChain\u7528\u4e8e\u9a8c\u8bc1\u7528\u6237\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6ce8\u518c\u591a\u4e2a\u6570\u5b57\u8bc1\u4e66\uff0c\u8d26\u6237\u4e0e\u8bc1\u4e66\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb</p> <ul> <li>\u64cd\u4f5c</li> </ul> <p>\u53ea\u8981\u662f\u6d89\u53ca\u5230\u7b7e\u540d\u4ea4\u6613\uff0c\u90fd\u5177\u4f53\u5230\u67d0\u4e00\u4e2a\u64cd\u4f5c\u4e0a\uff0c\u64cd\u4f5c\u5206\u516c\u5f00\u4e0e\u975e\u516c\u5f00\uff0c\u5982\u679c\u64cd\u4f5c\u88ab\u6ce8\u518c\u4e3a\u201d\u516c\u5f00\u201c\uff0c\u4e0d\u9700\u8981\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\uff0c\u5176\u4ed6\u7528\u6237\u4e5f\u53ef\u4ee5\u8c03\u7528\uff0c\u5982\u679c\u88ab\u6ce8\u518c\u4e3a\u201d\u975e\u516c\u5f00\u201c\uff0c\u5219\u5176\u4ed6\u7528\u6237\u9700\u8981\u5f97\u5230\u6388\u6743\u624d\u80fd\u8c03\u7528\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\uff0c\u53ef\u4ee5\u6ce8\u518c\u591a\u4e2a\u64cd\u4f5c\uff0c\u8d26\u6237\u4e0e\u64cd\u4f5c\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb</p> <p>\u6ce8\uff1a\u7ed3\u5408\u4ea4\u6613\u7684\u4e09\u79cd\u7c7b\u578b\uff08\u90e8\u7f72\u5408\u7ea6\u3001\u4fee\u6539\u5408\u7ea6\u72b6\u6001\u548c\u8c03\u7528\u5408\u7ea6\uff09\u6765\u7406\u89e3</p> <ul> <li>\u6388\u6743</li> </ul> <p>\u5c06\u7528\u6237\u81ea\u6709\u7684\u64cd\u4f5c\u6216\u522b\u4eba\u6388\u6743\u7ed9\u81ea\u5df1\u4e14\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21\u7684\u64cd\u4f5c\uff0c\u6388\u6743\u7ed9\u522b\u4eba\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6709\u591a\u4e2a\u88ab\u6388\u6743\u7684\u64cd\u4f5c\uff0c\u8d26\u6237\u4e0e\u88ab\u6388\u6743\u7684\u64cd\u4f5c\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb</p>"},{"location":"RepChain-2.0/#_10","title":"\u8d26\u6237\u6743\u9650\u7ba1\u7406","text":"<p>RepChain-v2.0.0\u901a\u8fc7\u6743\u9650\u7ba1\u7406\u5408\u7ea6\uff08\u9ed8\u8ba4\u5185\u7f6e\u7684\u7cfb\u7edf\u5408\u7ea6\uff0c\u5408\u7ea6\u540d\uff1a<code>RdidOperateAuthorizeTPL</code>\uff0c\u7248\u672c\u53f7\uff1a<code>1</code>\uff09\u6765\u7ba1\u7406\u7528\u6237\u8eab\u4efd\uff08\u8d26\u6237\u3001\u6743\u9650\u7b49\uff09\uff0c\u76ee\u524d\u5408\u7ea6\u91cc\u5b9a\u4e49\u7684\u6240\u6709\u65b9\u6cd5\u5982\u4e0b\u8868\u6240\u793a\uff1a</p> <p>\u662f\u5426\u516c\u5f00\uff1a\"\u5426\"\u8868\u793a\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u9700\u8981\u88ab\u6388\u6743\uff0c\"\u662f\"\u8868\u793a\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u65e0\u9700\u88ab\u6388\u6743</p> \u5408\u7ea6\u65b9\u6cd5\u540d \u7528\u9014\u63cf\u8ff0 \u662f\u5426\u516c\u5f00 \u65b9\u6cd5\u5f62\u53c2 <code>signUpSigner</code> \u6ce8\u518c\u8d26\u6237 \u5426 rep.proto.rc2.Signer <code>updateSigner</code> \u66f4\u65b0\u8d26\u6237 \u5426 rep.proto.rc2.Signer <code>updateSignerStatus</code> \u4fee\u6539\u8d26\u6237\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u5426 SignerStatus(creditCode: String, state: Boolean) <code>signUpCertificate</code> \u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u662f rep.proto.rc2.Certificate <code>updateCertificateStatus</code> \u4fee\u6539\u666e\u901a\u8bc1\u4e66\u72b6\u6001 \u662f CertStatus(creditCode: String, certName: String, state: Boolean) <code>signUpAllTypeCertificate</code> \u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5426 rep.proto.rc2.Certificate <code>updateAllTypeCertificateStatus</code> \u4fee\u6539\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66\u72b6\u6001 \u5426 CertStatus(creditCode: String, certName: String, state: Boolean) <code>signUpOperate</code> \u4e3a\u7528\u6237\u81ea\u5df1\u6ce8\u518c\u64cd\u4f5c \u662f rep.proto.rc2.Operate <code>updateOperateStatus</code> \u4fee\u6539\u64cd\u4f5c\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u662f OperateStatus(opId: String, state: Boolean) <code>grantOperate</code> \u6388\u6743\uff08\u8ba9\u6e21\u6743\u9650\uff09\u7ed9\u5176\u4ed6\u7528\u6237 \u662f List[AuthorizeString]] <code>updateGrantOperateStatus</code> \u66f4\u65b0\u6388\u6743\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u662f AuthorizeStatus(authId: String, state: Boolean) <code>bindCertToAuthorize</code> \u5c06\u6743\u9650\u7ed1\u5b9a\u5230\u7528\u6237\u5177\u4f53\u7684\u67d0\u4e2a\u8bc1\u4e66 \u662f rep.proto.rc2.BindCertToAuthorize <ul> <li>\u4e0a\u9762\u5217\u4e3e\u7684\u6240\u6709\u65b9\u6cd5\uff08\u64cd\u4f5c\uff09\u90fd\u5df2\u7ecf\u5728\u901a\u8fc7\u521b\u4e16\u5757\u6ce8\u518c\u5230\u4e86super_admin\uff08<code>\"identity-net:951002007l78123233\"</code>\uff09\u7684\u8d26\u6237\u4e0b</li> <li>super_admin\u53ef\u4ee5\u5c06\u975e\u516c\u5f00\u7684\u65b9\u6cd5\u6388\u6743\u7ed9\u5176\u4ed6\u6ce8\u518c\u7528\u6237\uff08\u6388\u6743\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u5141\u8bb8/\u7981\u6b62\u8be5\u7528\u6237\u518d\u6b21\u8ba9\u6e21\u7ed9\u5176\u4ed6\u7528\u6237\uff09</li> <li>\u90e8\u5206\u5f62\u53c2\u7ed3\u6784\u4f53\u5728RepChain\u9879\u76ee\u7684<code>src/main/protobuf/rc2.proto</code>\u91cc\u5b9a\u4e49</li> </ul>"},{"location":"RepChain-2.0/#_11","title":"\u8d26\u6237","text":"<p>\u8d26\u6237\u4f5c\u4e3a\u7528\u6237\u5728\u94fe\u4e0a\u7684\u8eab\u4efd\u6743\u9650\u7684\u8f7d\u4f53\uff0c\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8d26\u6237ID\u662f\u552f\u4e00\u6807\u8bc6\uff0c\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u5305\u542b\u591a\u4e2a\u8bc1\u4e66\u3001\u591a\u4e2a\u64cd\u4f5c\u3001\u591a\u4e2a\u88ab\u6388\u6743\u7684\u64cd\u4f5c\u3002</p> <p></p>"},{"location":"RepChain-2.0/#_12","title":"\u6ce8\u518c\u8d26\u6237","text":"<p>\u5408\u7ea6\u65b9\u6cd5\uff1a<code>signUpSigner</code>\uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u56e0\u6b64\u53ea\u8981\u6709\u8c03\u7528<code>\"signUpSigner\"</code>\u65b9\u6cd5\u7684\u6743\u9650\u5373\u53ef\u4e3a\u65b0\u7528\u6237\u6ce8\u518c\u8d26\u6237</p> <ul> <li>\u8d26\u6237ID\u547d\u540d\u89c4\u8303</li> </ul> <p><code>NetWorkID:UUID</code>\uff0c\u5982\uff1a<code>\"identity-net:121000005l35120456\"</code></p> <ul> <li>\u6ce8\u518c\u6d41\u7a0b</li> </ul> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237B\u6ce8\u518c\u8d26\u6237</p> <p>\u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528<code>signUpSigner</code>\u7684\u6743\u9650</p> <p>\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAdmin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528<code>signUpSigner</code>\u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528<code>signUpSigner</code>\u4e3a\u7528\u6237B\u6ce8\u518c\u8d26\u6237</p> <p></p> <p>\u4e0b\u9762\u4ee5\u4f7f\u7528<code>identity-net:951002007l78123233</code>\uff08superAdmin\uff09\u76f4\u63a5\u6784\u9020\u7b7e\u540d\u4ea4\u6613\u6765\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u65b0\u7528\u6237\u6ce8\u518c\u8d26\u6237\uff08<code>\"identity-net:usr-0\"</code>\uff09\u4e3a\u4f8b\uff08\u57fa\u4e8eRCJava-core\uff09</p> <ul> <li>step1\uff1a\u7528\u6237usr-0\u81ea\u5df1\u751f\u6210\u5bc6\u94a5\u5bf9\u4ee5\u53ca\u8bc1\u4e66<code>usr-0_0.cer</code>\uff08\u81ea\u7b7e\u540d\u6216CA\u7b7e\u53d1\uff09</li> <li>step2\uff1a\u7528\u6237usr-0\u5c06step1\u751f\u6210\u7684\u8bc1\u4e66<code>usr-0_0.cer</code>\u4ea4\u7ed9\u5177\u6709\u6ce8\u518c\u8d26\u6237\u6743\u9650\u7684\u7528\u6237\uff08\u5982super_admin\uff09</li> <li>step3\uff1asuper_admin\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u7528\u6237usr-0\u6ce8\u518c\u8d26\u6237<code>identity-net:usr-0</code></li> </ul> <pre><code>TranPostClient postClient = new TranPostClient(\"localhost:9081\");\nChainInfoClient infoClient = new ChainInfoClient(\"localhost:9081\");\n// \u8d26\u6237\u6743\u9650\u7ba1\u7406\u5408\u7ea6\nChaincodeId didChaincodeId = ChaincodeId.newBuilder().setChaincodeName(\"RdidOperateAuthorizeTPL\").setVersion(1).build();\n// \u6784\u9020\u7ba1\u7406\u5458\u7684\u79c1\u94a5\nPrivateKey super_pri = CertUtil.genX509CertPrivateKey(new File(\"jks/identity-net/951002007l78123233.super_admin.jks\"),\n\"super_admin\", \"951002007l78123233.super_admin\").getPrivateKey();\nTranCreator superCreator = TranCreator.newBuilder().setPrivateKey(super_pri).setSignAlgorithm(\"SHA256withECDSA\").build();\nCertId superCertId = CertId.newBuilder().setCreditCode(\"identity-net:951002007l78123233\").setCertName(\"super_admin\").build();\n// \u8bc1\u4e66pem\u5b57\u7b26\u4e32\nString certPem = new String(Files.readAllBytes(new File(\"jks/test/did/usr-0_0.cer\").toPath()));\nPeer.Certificate cert_proto = Peer.Certificate.newBuilder()\n// \u65b0\u7528\u6237usr-0\u7684\u8bc1\u4e66&lt;Pem\u5b57\u7b26\u4e32&gt;\n.setCertificate(certPem)\n.setAlgType(\"sha256withecdsa\")\n.setCertValid(true)\n.setCertType(Peer.Certificate.CertType.CERT_AUTHENTICATION)\n// \u8bbe\u7f6eCertId\uff0c&lt;\u8d26\u6237ID&gt;\u548c&lt;\u8bc1\u4e66\u522b\u540d&gt;\n.setId(Peer.CertId.newBuilder().setCreditCode(\"identity-net:usr-0\").setCertName(\"0\").build())\n.setCertHash(DigestUtils.sha256Hex(certPem.replaceAll(\"\\r\\n|\\r|\\n|\\\\s\", \"\")))\n.build();\nPeer.Signer usr0_signer = Peer.Signer.newBuilder()\n.setName(\"usr-0\")\n// \u7528\u6237usr-0\u7684\u8d26\u6237ID\n.setCreditCode(\"identity-net:usr-0\")\n.setMobile(\"18888888888\")\n// \u6ce8\u518c\u8d26\u6237\u65f6\uff0c\u8981\u9644\u5e26\u4e00\u4e2a\u6570\u5b57\u8bc1\u4e66\uff08\u8eab\u4efd\u8bc1\u4e66\uff09\n.addAllAuthenticationCerts(Collections.singletonList(cert_proto))\n.setSignerValid(true)\n.build();\n// super_admin\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4\u4ea4\u6613\uff0c\u6ce8\u518c\u7528\u6237\uff0c\u4ee5\u4fbf\u5728\u4e1a\u52a1\u94fe\u4f7f\u7528\nString tranId = UUID.randomUUID().toString();\n// \u6784\u9020\u7b7e\u540d\u4ea4\u6613\nPeer.Transaction tran = superCreator.createInvokeTran(tranId, superCertId, didChaincodeId, signUpSigner, JsonFormat.printer().print(usr0_signer), 0, \"\");\n// \u63d0\u4ea4\u4ea4\u6613\npostClient.postSignedTran(tran);\nTimeUnit.SECONDS.sleep(5);\n// \u67e5\u8be2\u4ea4\u6613\u4e0a\u94fe\u6267\u884c\u7ed3\u679c\nPeer.TransactionResult tranResult = infoClient.getTranResultByTranId(tranId);\nAssertions.assertEquals(0, tranResult.getErr().getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\");\n</code></pre>"},{"location":"RepChain-2.0/#_13","title":"\u7981\u7528/\u542f\u7528\u8d26\u6237","text":"<p>\u5982\u679c\u7528\u6237\u4e0d\u518d\u4f7f\u7528RepChain\uff0c\u6216\u8005\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\u9700\u8981\u7981\u7528\u8d26\u6237\uff0c\u53ef\u4fee\u6539\u7528\u6237\u7684\u8d26\u6237\u72b6\u6001\uff0c\u53ea\u8981\u6709\u8c03\u7528<code>\"updateSignerStatus\"</code>\u7684\u6743\u9650\u5373\u53ef\u4fee\u6539\u7528\u6237\u7684\u8d26\u6237\u72b6\u6001\uff0c\u53ef\u6267\u884c\u7981\u7528\u6216\u542f\u7528</p> <p>\u5408\u7ea6\u65b9\u6cd5\uff1a<code>updateSignerStatus</code>\uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u88ab\u6388\u6743\u7684\u7528\u6237\u624d\u53ef\u8c03\u7528</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237B\u7684\u8d26\u6237</p> <p>\u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528<code>updateSignerStatus</code>\u7684\u6743\u9650</p> <p>\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528<code>updateSignerStatus</code>\u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528<code>updateSignerStatus</code>\u4e3a\u7981\u7528/\u542f\u7528\u7528\u6237B\u7684\u8d26\u6237</p> <p></p>"},{"location":"RepChain-2.0/#_14","title":"\u4ee3\u7801\u793a\u4f8b","text":"<p>\u6d4b\u8bd5\u7528\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/SignerOperationTest.java</p>"},{"location":"RepChain-2.0/#_15","title":"\u8bc1\u4e66","text":"<p>\u8bc1\u4e66\u5206\u4e3a\u8eab\u4efd\u8bc1\u4e66\u548c\u666e\u901a\u8bc1\u4e66\uff0c\u8eab\u4efd\u8bc1\u4e66\u76f8\u5bf9\u666e\u901a\u8bc1\u4e66\u6bd4\u8f83\u91cd\u8981\uff0c\u56e0\u4e3a\u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5\u5bf9\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\uff0c\u53ef\u4ee5\u4e3a\u672c\u8d26\u6237\u6ce8\u518c\u666e\u901a\u8bc1\u4e66\u6216\u4fee\u6539\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001\uff08\u6709\u6548\u6027\uff09</p> <p></p>"},{"location":"RepChain-2.0/#_16","title":"\u6ce8\u518c\u8bc1\u4e66","text":"<ul> <li>\u6ce8\u518c\u666e\u901a\u8bc1\u4e66</li> </ul> <p>\u7528\u6237\u8d26\u6237\u6ce8\u518c\u6210\u529f\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5\u5bf9\u6784\u9020\u7b7e\u540d\u4ea4\u6613\uff0c\u81ea\u884c\u8c03\u7528\u7cfb\u7edf\u5408\u7ea6<code>RdidOperateAuthorizeTPL</code>\u4e2d\u7684<code>signUpCertificate</code>\u65b9\u6cd5\u6765\u4e3a\u81ea\u5df1\u6ce8\u518c\u666e\u901a\u8bc1\u4e66</p> <p>\u5408\u7ea6\u65b9\u6cd5\uff1a<code>signUpCertificate</code>\uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237A\u81ea\u5df1\u6ce8\u518c\u666e\u901a\u8bc1\u4e66</p> <p>\u7528\u6237A\u8c03\u7528<code>signUpCertificate</code>\u5373\u53ef\u4e3a\u81ea\u5df1\u6ce8\u518c\u8bc1\u4e66</p> <p></p> <ul> <li>\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66</li> </ul> <ol> <li>\u6ce8\u518c\u8d26\u6237\u65f6\uff0c\u4f1a\u9644\u5e26\u6ce8\u518c\u4e00\u4e2a\u8eab\u4efd\u8bc1\u4e66</li> <li>\u9664 1 \u4e4b\u5916\uff0c\u53ef\u5728\u5176\u4ed6\u6709\u9700\u8981\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u8c03\u7528\u7cfb\u7edf\u5408\u7ea6<code>RdidOperateAuthorizeTPL</code>\u4e2d\u7684<code>signUpAllTypeCertificate</code>\u65b9\u6cd5\u4e3a\u4e00\u4e2a\u6709\u6548\u8d26\u6237\uff08\u81ea\u5df1\u6216\u5176\u4ed6\uff09\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66</li> </ol> <p>\u5408\u7ea6\u65b9\u6cd5\uff1a<code>signUpAllTypeCertificate</code>\uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u88ab\u6388\u6743\u7684\u7528\u6237\u624d\u53ef\u8c03\u7528</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237A\u6216B\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66</p> <p>\u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528<code>signUpAllTypeCertificate</code>\u7684\u6743\u9650</p> <p>\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAdmin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528<code>signUpAllTypeCertificate</code>\u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528<code>signUpAllTypeCertificate</code>\u4e3a\u7528\u6237A/B\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66</p> <p></p> <pre><code>// \u6388\u6743\uff0csuper\u6388\u6743\u7ed9usr0, \u6ce8\u518c\u4efb\u610f\u8bc1\u4e66\u7684\u65b9\u6cd5\nlong millis = System.currentTimeMillis();\nPeer.Authorize authorize = Peer.Authorize.newBuilder()\n.setId(\"identity-net:\" + UUID.randomUUID())\n.setGrant(\"identity-net:951002007l78123233\")\n.addGranted(\"identity-net:usr-0\")\n.addOpId(DigestUtils.sha256Hex(\"identity-net:RdidOperateAuthorizeTPL.signUpAllTypeCertificate\"))\n// \u8bbe\u7f6e\u662f\u5426\u53ef\u7ee7\u7eed\u8ba9\u6e21\n.setIsTransfer(Peer.Authorize.TransferType.TRANSFER_REPEATEDLY)\n.setCreateTime(Timestamp.newBuilder().setSeconds(millis / 1000).setNanos((int) ((millis % 1000) * 1000000)).build())\n.setAuthorizeValid(true)\n.setVersion(\"1.0\")\n.build();\nString tranId = UUID.randomUUID().toString();\n// \u6388\u6743\u7ed9usr-0\nPeer.Transaction tran = node1Creator.createInvokeTran(tranId, superCertId, didChaincodeId, grantOperate,\nJSONObject.toJSONString(Collections.singletonList(JsonFormat.printer().print(authorize))), 0, \"\");\npostClient.postSignedTran(tran);\nTimeUnit.SECONDS.sleep(2);\nPeer.TransactionResult tranResult = getTransactionResult(tranId);\nPeer.ActionResult actionResult = tranResult.getErr();\nAssertions.assertEquals(0, actionResult.getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6388\u6743\u6210\u529f\");\n// step2: usr0\u4e3ausr1 \u6ce8\u518c\u8eab\u4efd\u8bc1\u4e66\nPeer.Certificate usr1_cert_1 = Peer.Certificate.newBuilder()\n.setCertificate(certPem)\n.setAlgType(\"sha256withecdsa\")\n.setCertValid(true)\n// \u8bbe\u7f6e\u8bc1\u4e66\u7c7b\u578b\uff0c\u8bc1\u4e66\u7c7b\u578b\u4e3a\u8eab\u4efd\u8bc1\u4e66\n.setCertType(Peer.Certificate.CertType.CERT_AUTHENTICATION)\n// \u8bc1\u4e66\u540d\u6839\u636e\u81ea\u5df1\u9700\u8981\u8bbe\u7f6e\n.setId(Peer.CertId.newBuilder().setCreditCode(\"identity-net:usr-1\").setCertName(\"0\").build())\n.setCertHash(DigestUtils.sha256Hex(certPem.replaceAll(\"\\r\\n|\\r|\\n|\\\\s\", \"\")))\n.build();;\nString tranId_1 = UUID.randomUUID().toString();\n// \u6784\u9020\u4ea4\u6613\nPeer.Transaction tran_1 = usr0_tranCreator_0.createInvokeTran(tranId_1, usr0_certId_0, didChaincodeId, signUpAllTypeCertificate, JsonFormat.printer().print(usr1_cert_1), 0, \"\");\npostClient.postSignedTran(tran_1);\nTimeUnit.SECONDS.sleep(2);\nPeer.TransactionResult tranResult_1 = getTransactionResult(tranId_1);\nPeer.ActionResult actionResult_1 = tranResult_1.getErr();\nAssertions.assertEquals(0, tranResult_1.getErr().getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\");\n</code></pre>"},{"location":"RepChain-2.0/#_17","title":"\u7981\u7528/\u542f\u7528\u8bc1\u4e66","text":"<p>\u5982\u679c\u7528\u6237\u79c1\u94a5\u4e22\u5931\uff0c\u6216\u8005\u4e0d\u60f3\u518d\u4f7f\u7528\u67d0\u4e2a\u79c1\u94a5\uff0c\u53ef\u4ee5\u5c06\u5728\u94fe\u4e0a\u7684\u3001\u4e0e\u79c1\u94a5\u5bf9\u5e94\u7684\u8bc1\u4e66\u7981\u7528\u6389\uff1b\u540e\u7eed\u627e\u56de\u6216\u8005\u60f3\u542f\u7528\u79c1\u94a5\u65f6\uff0c\u53ef\u4ee5\u6062\u590d\u8bc1\u4e66\u72b6\u6001</p> <ul> <li>\u7981\u7528/\u542f\u7528\u666e\u901a\u8bc1\u4e66</li> </ul> <p>\u7528\u6237\u4f7f\u7528\u81ea\u5df1\u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5\u6784\u5efa\u7684\u7b7e\u540d\u4ea4\u6613\uff0c\u53ef\u4ee5\u8c03\u7528<code>updateCertificateStatus</code>\u65b9\u6cd5\u6765\u4fee\u6539\u81ea\u5df1\u8d26\u6237\u4e0b\u7684\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001</p> <p>\u5408\u7ea6\u65b9\u6cd5\uff1a<code>updateCertificateStatus</code>\uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u4f46\u662f\u8981\u6ce8\u610f\uff0c\u9700\u4f7f\u7528\u81ea\u5df1\u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5\u6765\u6784\u5efa\u7b7e\u540d\u4ea4\u6613\uff0c\u5e76\u4e14\u53ea\u80fd\u4fee\u6539\u81ea\u5df1\u8d26\u6237\u4e0b\u7684\u666e\u901a\u8bc1\u4e66\u72b6\u6001</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u81ea\u5df1\u7684\u666e\u901a\u8bc1\u4e66</p> <p>\u7528\u6237A\u8c03\u7528<code>updateCertificateStatus</code>\u5373\u53ef\u7981\u7528\u81ea\u5df1\u7684\u666e\u901a\u8bc1\u4e66</p> <p></p> <ul> <li>\u7981\u7528/\u542f\u7528\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66</li> </ul> <p>\u5408\u7ea6\u65b9\u6cd5\uff1a<code>updateAllTypeCertificateStatus</code>\uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u53ef\u4fee\u6539\u81ea\u5df1\u6216\u5176\u4ed6\u4eba\u8d26\u6237\u4e0b\u7684\u7684\u8eab\u4efd\u8bc1\u4e66\u6216\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u7684\u666e\u901a\u8bc1\u4e66\uff0c\u4ee5\u53ca\u7981\u7528\u7528\u6237B\u7684\u8eab\u4efd\u8bc1\u4e66</p> <p>\u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528<code>updateAllTypeCertificateStatus</code>\u7684\u6743\u9650</p> <p>\u53ef\u9009\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528<code>updateAllTypeCertificateStatus</code>\u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528<code>updateAllTypeCertificateStatus</code>\u7981\u7528\u7528\u6237B\u7684\u8eab\u4efd\u8bc1\u4e66\u4ee5\u53caA\u7684\u666e\u901a\u8bc1\u4e66</p> <p></p>"},{"location":"RepChain-2.0/#_18","title":"\u4ee3\u7801\u793a\u4f8b","text":"<p>\u6d4b\u8bd5\u7528\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/CertOpeartionTest.java</p>"},{"location":"RepChain-2.0/#_19","title":"\u64cd\u4f5c","text":"<p>\u6bcf\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6709\u5982\u4e0b\u4e09\u7c7b\u64cd\u4f5c\uff0c\u4e14\u6bcf\u4e2a\u7c7b\u578b\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c</p> <ul> <li>\u90e8\u7f72\u5408\u7ea6\u3001\u4fee\u6539\u5408\u7ea6\u72b6\u6001</li> <li>\u5408\u7ea6\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u65b9\u6cd5</li> <li>RepChain API\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u63a5\u53e3</li> </ul> <p></p>"},{"location":"RepChain-2.0/#_20","title":"\u6ce8\u518c\u64cd\u4f5c","text":"<p>\u6ce8\u518c\u5408\u7ea6\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u65b9\u6cd5\uff0c\u53ea\u6709\u6ce8\u518c\u4e4b\u540e\uff0c\u7528\u6237\u624d\u53ef\u4ee5\u901a\u8fc7\u7b7e\u540d\u4ea4\u6613\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5e76\u4e14\u5c06\u8be5\u64cd\u4f5c\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u540e\uff0c\u5176\u4ed6\u7528\u6237\u4e5f\u5f97\u5230\u4e86\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u6743\u9650</p> <ul> <li>\u64cd\u4f5cID\u547d\u540d\u89c4\u8303</li> </ul> <p>sha256(\u64cd\u4f5c\u540d)\uff0c\u64cd\u4f5c\u540d\u7684\u89c4\u8303\u8bf7\u53c2\u89c1\u4e0b\u6587</p> <ul> <li> <p>\u64cd\u4f5c\u547d\u540d\u89c4\u8303</p> </li> <li> <p>API\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c</p> <ul> <li><code>NetWorkID:transaction.postTranByString</code>\uff0c\u5982\uff1a<code>\"identity-net:transaction.postTranByString\"</code></li> </ul> </li> <li>\u90e8\u7f72\u5408\u7ea6\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c\uff0c\u4e4b\u540e\u518d\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237<ul> <li><code>NetWorkID:ContractName.deploy</code>\uff0c\u5982\uff1a<code>\"identity-net:CredenceTPL.deploly\"</code>\uff0c\u53ea\u80fd\u90e8\u7f72\u540d\u4e3a<code>CredenceTPL</code>\u7684\u5408\u7ea6</li> <li><code>NetWorkID:*.deploy</code>\uff0c\u5982\uff1a<code>\"identity-net:*.deploly\"</code>\uff0c\u90e8\u7f72\u4efb\u4f55\u5408\u7ea6\uff0c\u5728\u521b\u4e16\u5757\u4e2d\u5df2\u6ce8\u518c\u5230super_admin\u8d26\u6237\u4e0b</li> </ul> </li> <li>\u4fee\u6539\u5408\u7ea6\u72b6\u6001\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c\uff0c\u4e4b\u540e\u518d\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237<ul> <li><code>NetWorkID:ContractName.setState</code>\uff0c\u5982\uff1a<code>\"identity-net:CredenceTPL.setState\"</code>\uff0c\u53ea\u80fd\u4fee\u6539\u540d\u4e3a<code>CredenceTPL</code>\u7684\u5408\u7ea6\u72b6\u6001</li> <li><code>NetWorkID:*.setState</code>\uff0c\u5982\uff1a<code>\"identity-net:*.setState\"</code>\uff0c\u4fee\u6539\u4efb\u4f55\u5408\u7ea6\u72b6\u6001\uff0c\u5728\u521b\u4e16\u5757\u4e2d\u6ce8\u518c\u5230super_admin\u8d26\u6237\u4e0b</li> </ul> </li> <li>\u5408\u7ea6\u64cd\u4f5c\uff0c\u5177\u6709\u5408\u7ea6\u90e8\u7f72\u6743\u9650\u7684\u7528\u6237\uff0c\u5c31\u53ef\u4ee5\u6ce8\u518c<ul> <li><code>NetWorkID:ContractName.MethodName</code>\uff0c\u5982\uff1a<code>\"identity-net:CredenceTPL.proof\"</code>\uff0c\u540d\u4e3a<code>CredenceTPL</code>\u7684\u5408\u7ea6\u4e2d\u7684\u540d\u4e3a<code>proof</code>\u7684\u65b9\u6cd5</li> </ul> </li> </ul> <p>\u65b9\u6cd5\uff1a<code>signUpOperate</code>\uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u4f46\u662f\u8981\u6ce8\u610f\uff0c\u7528\u6237\u60f3\u8981\u6ce8\u518c\u67d0\u5408\u7ea6\u91cc\u7684\u65b9\u6cd5\uff0c\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u5373\u7528\u6237\u62e5\u6709\u8be5\u5408\u7ea6\u7684\u90e8\u7f72\u6743\u9650\u3002</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\uff0c\u8fdb\u800c\u6ce8\u518c\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5method_1\uff0c\u7528\u6237B\u60f3\u6ce8\u518c\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5method_2</p> <p>\u5206\u6790\uff1a\u53ea\u8981\u7528\u6237A\u548c\u7528\u6237B\u83b7\u5f97\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\u7684\u6743\u9650\u5373\u53ef</p> <p>\u53ef\u9009\u62e9\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\u6ce8\u518c<code>\"identity-net:TestProofTPL.deploy\"</code>\u64cd\u4f5c\u5230\u81ea\u5df1\u8d26\u6237\uff1bstep2\uff1a\u6388\u6743\u7528\u6237A <code>\"identity-net:TestProofTPL.deploy\"</code>\u7684\u6743\u9650\uff0c\u6388\u4e88\u7528\u6237B <code>\"identity-net:*.deploy\"</code>\u7684\u6743\u9650\uff1bstep3\uff1a\u7528\u6237A\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\uff1bstep4\uff1a\u7528\u6237A\u6ce8\u518c<code>\"identity-net:TestProofTPL.method_1\"</code>\uff0c\u7528\u6237B\u6ce8\u518c<code>\"identity-net:TestProofTPL.method_2\"</code></p> <p></p>"},{"location":"RepChain-2.0/#_21","title":"\u7981\u7528/\u542f\u7528\u64cd\u4f5c","text":"<p>\u64cd\u4f5c\u72b6\u6001\u7684\u4fee\u6539\u5177\u6709\u5168\u5c40\u6027\u548c\u4f20\u9012\u6027\uff0c\u5373\u64cd\u4f5c\u7684\u6ce8\u518c\u8005\uff0c\u5c06\u64cd\u4f5c\u7981\u7528\u540e\uff0c\u6240\u6709\u88ab\u6388\u6743\u8be5\u64cd\u4f5c\u7684\u7528\u6237\uff0c\u540e\u7eed\u90fd\u5c06\u65e0\u6cd5\u4f7f\u7528\u8be5\u64cd\u4f5c</p> <p>\u65b9\u6cd5\uff1a<code>updateOperateStatus</code>\uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u7528\u6237\u60f3\u8981\u7981\u7528\u5408\u7ea6\u91cc\u7684\u67d0\u4e2a\u65b9\u6cd5\uff0c\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u5373\u7528\u6237\u62e5\u6709\u8be5\u5408\u7ea6\u7684\u90e8\u7f72\u6743\u9650\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8d26\u6237B\u5177\u6709<code>\"identity-net:*.deploly\"</code>\uff0c\u8d26\u6237A\u5177\u6709<code>\"identity-net:cName.deploy\"</code>\uff0c\u7981\u7528\u64cd\u4f5c\u540e\uff0c\u6240\u6709\u7528\u6237\u5747\u4e0d\u53ef\u518d\u8c03\u7528\u6267\u884ccName.method_1\u4e0ecName.method_2\u4e86</p> <p></p>"},{"location":"RepChain-2.0/#_22","title":"\u4ee3\u7801\u793a\u4f8b","text":"<p>\u6d4b\u8bd5\u7528\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/OperOperationTest.java</p>"},{"location":"RepChain-2.0/#_23","title":"\u6388\u6743","text":"<p>\u7528\u6237\u53ef\u5c06\u81ea\u5df1\u8d26\u6237\u4e0b\u7684\u64cd\u4f5c\u6216\u522b\u4eba\u8ba9\u6e21\u7ed9\u81ea\u5df1\u7684\u6709\u6548\u7684\u4e14\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21\u7684\u64cd\u4f5c\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237\uff0c\u5728RepChain\u7684\u6240\u6709\u8d26\u6237\u96c6\u5408\u91cc\uff0c\u5404\u4e2a\u8d26\u6237\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u6388\u6743\uff0c\u6bcf\u4e2a\u6388\u6743\u90fd\u6709\u552f\u4e00ID</p> <p>\u6388\u6743ID\u547d\u540d\u89c4\u8303</p> <p><code>NetWorkID:UUID</code>\uff0c\u5982\uff1a<code>\"identity-net:auth-usr-0-to-usr-1\"</code></p> <p></p>"},{"location":"RepChain-2.0/#_24","title":"\u8ba9\u6e21\u64cd\u4f5c","text":"<p>\u65b9\u6cd5\uff1a<code>grantOperate</code>\uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u8d26\u6237B\u6709\u64cd\u4f5c<code>\"identity-net:TestProofTPL.method_2\"</code>\uff0c\u8d26\u6237A\u6709\u64cd\u4f5c<code>\"identity-net:TestProofTPL.method_1\"</code>\uff0c\u8d26\u6237B\u5728\u4e3a\u8d26\u6237D\u6388\u6743\u65f6\uff0c\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7ee7\u7eed\u8ba9\u6e21\uff0c\u8d26\u6237A\u4e3a\u8d26\u6237C\u6388\u6743\u65f6\uff0c\u8bbe\u7f6e\u4e3a\u53ef\u7ee7\u7eed\u8ba9\u6e21\uff0c\u56e0\u6b64\u6700\u7ec8D\u4e0d\u53ef\u5c06<code>\"identity-net:TestProofTPL.method_2\"</code>\u7ee7\u7eed\u8ba9\u6e21\u7ed9\u8d26\u6237E\uff0c\u800c\u8d26\u6237C\u53ef\u4ee5\u7ee7\u7eed\u5c06<code>\"identity-net:TestProofTPL.method_1\"</code>\u8ba9\u6e21\u7ed9\u8d26\u6237E</p> <p></p>"},{"location":"RepChain-2.0/#_25","title":"\u7981\u7528/\u542f\u7528\u6388\u6743","text":"<p>\u7981\u7528/\u542f\u7528\u6388\u6743\u4e0d\u5177\u6709\u5168\u5c40\u6027\u548c\u4f20\u9012\u6027\uff0c\u5047\u8bbeA\u6388\u6743\u7ed9B\u7528\u6237\u4e00\u4e2a\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21\u7684\u6743\u9650\uff0cB\u7ee7\u7eed\u6388\u6743\u7ed9C\uff0cA\u5c06\u7ed9B\u7684\u6388\u6743\u7981\u7528\uff0c\u4e0d\u5f71\u54cdC\u7684\u4f7f\u7528</p> <p>\u65b9\u6cd5\uff1a<code>updateGrantOperateStatus</code>\uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0cC\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u7ed9C\u7684\u67d0\u4e2a\u6388\u6743</p> <p>\u7528\u6237A\u8c03\u7528<code>updateGrantOperateStatus</code>\u53ef\u7981\u7528\u7ed9C\u7684\u6388\u6743<code>\"identity-net:cName.method_1\"</code>\uff0c\u4e4b\u540eC\u4e0d\u53ef\u4ee5\u518d\u8c03\u7528\u8be5\u65b9\u6cd5</p> <p></p>"},{"location":"RepChain-2.0/#_26","title":"\u7ed1\u5b9a\u6388\u6743\u5230\u8bc1\u4e66","text":"<p>\u7528\u6237\u53ef\u5c06\u522b\u7684\u7528\u6237\u6388\u4e88\u7ed9\u81ea\u5df1\u7684\u6743\u9650\u7ed1\u5b9a\u5230\u8d26\u6237\u4e0b\u7684\u67d0\u4e2a\u5177\u4f53\u8bc1\u4e66\u4e0a\uff0c\u4e4b\u540e\uff0c\u7528\u6237\u4f7f\u7528\u8be5\u8bc1\u4e66\u5bf9\u5e94\u7684\u79c1\u94a5\u5bf9\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u53ef\u901a\u8fc7\u8be5\u6743\u9650\u9a8c\u8bc1\uff0c\u5176\u4ed6\u8bc1\u4e66\u5bf9\u5e94\u7684\u79c1\u94a5\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u4e0d\u53ef\u4ee5\u901a\u8fc7\u8be5\u6743\u9650\u9a8c\u8bc1</p> <p>\u65b9\u6cd5\uff1a<code>bindCertToAuthorize</code>\uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528</p> <p>\u4e3e\u4f8b\u8bf4\u660e\uff1a\u57fa\u4e8e\u4e0a\u4e00\u5c0f\u8282\u7684\u6743\u9650\u8ba9\u6e21\u64cd\u4f5c\u4e4b\u540e\uff0c\u73b0\u6709\u7528\u6237C\uff0c\u7528\u6237C\u6709\u4e24\u4e2a\u8bc1\u4e66\"cert_0\"\u548c\"cert_1\"\uff0c\u4e24\u4e2a\u8bc1\u4e66\u5206\u522b\u5bf9\u5e94\u7684\u79c1\u94a5\"pri_1\"\u4e0e\"pri_2\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u90fd\u53ef\u4ee5\u8c03\u7528<code>\"cName.method_1\"</code>\uff0c\u5f53C\u5c06A\u6388\u4e88\u7ed9\u4ed6\u7684\u6743\u9650\u7ed1\u5b9a\u5230\u8bc1\u4e66\"cert_0\"\u540e\uff0c\u5219\u53ea\u80fd\"pri_1\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u53ef\u4ee5\u8c03\u7528<code>\"cName.method_1\"</code>\uff0c\"pri_2\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u4e0d\u53ef\u4ee5\u8c03\u7528<code>\"cName.method_1\"</code></p> <p></p>"},{"location":"RepChain-2.0/#_27","title":"\u4ee3\u7801\u793a\u4f8b","text":"<p>\u6d4b\u8bd5\u7528\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/AuthOperationTest.java</p>"},{"location":"RepChain-2.0/#sdk","title":"SDK\u4f7f\u7528","text":""},{"location":"RepChain-2.0/#rcjava-core","title":"RCJava-core","text":"<p>\u65b0\u7528\u6237\u4ece\u6ce8\u518c\u4e0a\u94fe\u5230\u8c03\u7528\u5408\u7ea6\u65b9\u6cd5\u65f6\uff0c\u4f7f\u7528RCJava-core\u7684\u903b\u8f91\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u8be5\u903b\u8f91\u5177\u6709\u987a\u5e8f\u6027\uff0c\u540e\u7eed\u64cd\u4f5c\u9700\u8981\u5728\u524d\u7f6e\u64cd\u4f5c\u5df2\u5b8c\u6210\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u3002\u5728\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\u4e2d\uff0c\u4ee5<code>identity-net:951002007l78123233</code>\uff08super_admin\uff09\u76f4\u63a5\u6784\u9020\u7b7e\u540d\u4ea4\u6613\u6765\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u65b0\u7528\u6237usr-0\uff08<code>\"identity-net:usr-0\"</code>\uff09\u6ce8\u518c\u5e76\u6388\u6743\u4e3a\u4f8b\uff0c\u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>step1\uff1a\u7528\u6237usr-0\u81ea\u5df1\u751f\u6210\u5bc6\u94a5\u5bf9\u4ee5\u53ca\u8bc1\u4e66<code>usr-0_0.cer</code>\uff08\u81ea\u7b7e\u540d\u6216CA\u7b7e\u53d1\uff09</li> <li>step2\uff1a\u7528\u6237usr-0\u5c06step1\u751f\u6210\u7684\u8bc1\u4e66<code>usr-0_0.cer</code>\u4ea4\u7ed9\u5177\u6709\u6ce8\u518c\u8d26\u6237\u6743\u9650\u7684\u7528\u6237\uff08\u5982super_admin\uff09</li> <li>step3\uff1asuper_admin\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u7528\u6237usr-0\uff0c\u6b64\u6b65\u9aa4\u4e2dusr-0\u7684\u8d26\u6237\u4ee5\u53ca\u8bc1\u4e66\u90fd\u88ab\u6ce8\u518c\u4e86</li> <li>step4\uff1asuper_admin\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u64cd\u4f5c</li> <li>step5\uff1asuper_admin\u6388\u6743\u7ed9usr-0\u53ef\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u6743\u9650</li> <li>step6\uff1ausr-0\u5177\u6709\u4e86\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\uff0c\u56e0\u6b64\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72\u5408\u7ea6</li> <li>step7\uff1ausr-0\u4f5c\u4e3a\u5408\u7ea6\u90e8\u7f72\u8005\uff0c\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5</li> <li>step8\uff1ausr-0\u8c03\u7528\u4e1a\u52a1\u94fe\u4e2d\u521a\u90e8\u7f72\u7684\u5408\u7ea6\uff0c\u5b58\u8bc1\u6570\u636e</li> </ul> <p>\u4e0a\u8ff0\u6d41\u7a0b\u7684\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff0c\u5b8c\u6574\u4ee3\u7801\u8bf7\u8bbf\u95eeRCJava-core\u9879\u76ee\u7684<code>src\\test\\java\\com\\rcjava\\did</code>\u76ee\u5f55\uff1a</p> <pre><code>//\u4ee5\u4e0b\u793a\u4f8b\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u82e5\u4e3a\u5355\u94fe\u6a21\u5f0f\uff1a\n//1.\u9700\u5c06\u4ee3\u7801\u4e2d\u7684\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d\u6539\u4e3a\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\n//2.\u9700\u5c06\u63d0\u4ea4\u81f3&lt;\u4e1a\u52a1\u94fe&gt;\u201cpostCredenceClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3&lt;\u8eab\u4efd\u94fe&gt;\u201cpostClient\u201d\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\npublic class Test {\n// \u8eab\u4efd\u94fe\nTranPostClient postClient = new TranPostClient(\"localhost:9081\");\nChainInfoClient infoClient = new ChainInfoClient(\"localhost:9081\");\n// \u4e1a\u52a1\u94fe\nTranPostClient postCredenceClient = new TranPostClient(\"localhost:9086\");\nChainInfoClient infoCredenceClient = new ChainInfoClient(\"localhost:9086\");\n// superAdmin\nTranCreator superCreator;\nPeer.CertId superCertId;\n// \u65b0\u7528\u6237usr0\nTranCreator usr0_tranCreator_0;\nPeer.CertId usr0_certId_0;\n//\u8d26\u6237\u6743\u9650\u7ba1\u7406\u5408\u7ea6\nPeer.ChaincodeId didChaincodeId = Peer.ChaincodeId.newBuilder().setChaincodeName(\"RdidOperateAuthorizeTPL\").setVersion(1).build();\nPeer.ChaincodeId credenceTPLId = Peer.ChaincodeId.newBuilder().setChaincodeName(\"CredenceTPL\").setVersion(1).build();\n@BeforeAll\nvoid init() {\n//\u6784\u9020\u7ba1\u7406\u5458\u7684\u79c1\u94a5\nPrivateKey super_pri = CertUtil.genX509CertPrivateKey(new File(\"jks/test/multi_chain/identity.951002007l78123233.super_admin.jks\"),\n\"super_admin\", \"951002007l78123233.super_admin\").getPrivateKey();\nsuperCreator = TranCreator.newBuilder().setPrivateKey(super_pri).setSignAlgorithm(\"SHA256withECDSA\").build();\nsuperCertId = Peer.CertId.newBuilder().setCreditCode(\"identity-net:951002007l78123233\").setCertName(\"super_admin\").build();\n//\u6784\u9020usr0\u7684\u79c1\u94a5\n//\u4f7f\u7528KeyStoreExplorer\u5de5\u5177\u6216\u8005\u4f7f\u7528\u4ee3\u7801\u5b9e\u4f8b(https://gitee.com/BTAJL/RCJava-core/blob/master/src/main/java/com/rcjava/util/CertUtil.java)\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66\nPrivateKey usr0_pri = CertUtil.genX509CertPrivateKey(new File(\"jks/test/did/usr-0_0.jks\"), \"123\", \"usr_0_0\").getPrivateKey();\nusr0_tranCreator_0 = TranCreator.newBuilder().setPrivateKey(usr0_pri).setSignAlgorithm(\"SHA256withECDSA\").build();\nusr0_certId_0 = Peer.CertId.newBuilder().setCreditCode(\"credence-net:usr-0\").setCertName(\"0\").build();\n}\n@Test\n@DisplayName(\"super_admin\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u7528\u6237usr-0\uff0c\u8be5\u6b65\u9aa4\u6ce8\u518c\u4e86usr-0\u7684\u8d26\u6237\u4ee5\u53ca\u8bc1\u4e66\")\n@Order(1)\nvoid signUpSignerTest() throws InterruptedException, IOException {\n// \u8bc1\u4e66pem\u5b57\u7b26\u4e32\nString certPem = new String(Files.readAllBytes(new File(\"jks/test/did/usr-0_0.cer\").toPath()));\nPeer.Certificate cert_proto = Peer.Certificate.newBuilder()\n// \u65b0\u7528\u6237usr-0\u7684\u8bc1\u4e66\n.setCertificate(certPem)\n.setAlgType(\"sha256withecdsa\")\n.setCertValid(true)\n.setCertType(Peer.Certificate.CertType.CERT_AUTHENTICATION)\n.setId(Peer.CertId.newBuilder().setCreditCode(\"credence-net:usr-0\").setCertName(\"0\").build())\n.setCertHash(DigestUtils.sha256Hex(certPem.replaceAll(\"\\r\\n|\\r|\\n|\\\\s\", \"\")))\n.build();\nPeer.Signer usr0_signer = Peer.Signer.newBuilder()\n.setName(\"usr-0\")\n// \u65b0\u7528\u6237usr-0\u7684\u8d26\u6237ID\n.setCreditCode(\"credence-net:usr-0\") // \u65b0\u6ce8\u518c\u7528\u6237   \u4e1a\u52a1\u94fe\u524d\u7f00\uff0ccredence-net:*****.usr-11\n.setMobile(\"18888888888\")\n.addAllAuthenticationCerts(Collections.singletonList(cert_proto))\n.setSignerValid(true)\n.build();\n// super_admin\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4\u4ea4\u6613\uff0c\u6ce8\u518c\u7528\u6237\uff0c\u4ee5\u4fbf\u5728\u4e1a\u52a1\u94fe\u4f7f\u7528\nString tranId_1 = UUID.randomUUID().toString();\nPeer.Transaction tran_1 = superCreator.createInvokeTran(tranId_1, superCertId, didChaincodeId, signUpSigner, JsonFormat.printer().print(usr0_signer), 0, \"\");\npostClient.postSignedTran(tran_1);\nTimeUnit.SECONDS.sleep(5);\nPeer.TransactionResult tranResult_1 = infoClient.getTranResultByTranId(tranId_1);\nAssertions.assertEquals(0, tranResult_1.getErr().getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\");\n}\n@Test\n@DisplayName(\"super_admin\u6ce8\u518cOperate-\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6CredenceTPL.deploy\u7684\u64cd\u4f5c\")\n@Order(2)\nvoid signUpOperate() throws InterruptedException, IOException {\n// super_admin\u6ce8\u518c\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u64cd\u4f5c\uff0c\u5411&lt;\u8eab\u4efd\u94fe&gt;\u63d0\u4ea4\n//\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411&lt;\u4e1a\u52a1\u94fe&gt;\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d\n//\u5c06\u63d0\u4ea4\u81f3&lt;\u8eab\u4efd\u94fe&gt;\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3&lt;\u4e1a\u52a1\u94fe&gt;\u201cpostCredenceClient\u201d\nlong millis_1 = System.currentTimeMillis();\nPeer.Operate operate = Peer.Operate.newBuilder()\n.setOpId(DigestUtils.sha256Hex(\"credence-net:CredenceTPL.deploy\"))\n.setDescription(\"\u90e8\u7f72\u5b58\u8bc1\u5408\u7ea6-CredenceTPL\u7684\u6743\u9650\")\n.setRegister(\"identity-net:951002007l78123233\")\n.setIsPublish(false)\n.setOperateType(Peer.Operate.OperateType.OPERATE_CONTRACT)\n.setAuthFullName(\"credence-net:CredenceTPL.deploy\")\n.setCreateTime(Timestamp.newBuilder().setSeconds(millis_1 / 1000).setNanos((int) ((millis_1 % 1000) * 1000000)).build())\n.setOpValid(true)\n.setVersion(\"1.0\")\n.build();\nString tranId_2 = UUID.randomUUID().toString();\nPeer.Transaction tran_2 = superCreator.createInvokeTran(tranId_2, superCertId, didChaincodeId, signUpOperate, JsonFormat.printer().print(operate), 0, \"\");\npostClient.postSignedTran(tran_2);\nTimeUnit.SECONDS.sleep(5);\nPeer.TransactionResult tranResult_2 = infoClient.getTranResultByTranId(tranId_2);\nPeer.ActionResult actionResult_2 = tranResult_2.getErr();\nAssertions.assertEquals(0, actionResult_2.getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u64cd\u4f5c\u6ce8\u518c\u6210\u529f\");\n}\n@Test\n@DisplayName(\"super_admin\u6388\u6743\u7ed9credence-net:usr-0\u53ef\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\")\n@Order(3)\nvoid grantOperate() throws InterruptedException, IOException {\n//super_admin\u6388\u6743\u7ed9usr0\u90e8\u7f72\u5408\u7ea6(\"credence-net:CredenceTPL.deploy\")\u7684\u6743\u9650\uff0c\u5411&lt;\u8eab\u4efd\u94fe&gt;\u63d0\u4ea4\n//\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411&lt;\u4e1a\u52a1\u94fe&gt;\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d\n//\u5c06\u63d0\u4ea4\u81f3&lt;\u8eab\u4efd\u94fe&gt;\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3&lt;\u4e1a\u52a1\u94fe&gt;\u201cpostCredenceClient\u201d\nlong millis = System.currentTimeMillis();\nPeer.Authorize authorize_1 = Peer.Authorize.newBuilder()\n.setId(\"credence-net:\" + UUID.randomUUID())\n.setGrant(\"identity-net:951002007l78123233\")  // \u6388\u6743\u8005\uff0c\u8fd9\u91cc\u662fsuper_admin\n.addGranted(\"credence-net:usr-0\")   // \u88ab\u6388\u6743\u8005 usr-0\n//\u6b64\u5904\u5408\u7ea6\u4e3aCredenceTPL\uff0c\u540e\u7eed\u90e8\u7f72\u5176\u4ed6\u5408\u7ea6\u9700\u8981\u4fee\u6539\n.addOpId(DigestUtils.sha256Hex(\"credence-net:CredenceTPL.deploy\"))  // \u6743\u9650\u8ba9\u6e21\uff0c\u6b64\u5904\u4ee3\u8868usr-0\u53ef\u4ee5\u7ee7\u7eed\u6388\u6743\u7ed9\u522b\u4eba\n.setIsTransfer(Peer.Authorize.TransferType.TRANSFER_REPEATEDLY) .setCreateTime(Timestamp.newBuilder().setSeconds(millis / 1000).setNanos((int) ((millis % 1000) * 1000000)).build())\n.setAuthorizeValid(true)\n.setVersion(\"1.0\")\n.build();\nString tranId_3 = UUID.randomUUID().toString();\nPeer.Transaction tran_3 = superCreator.createInvokeTran(tranId_3, superCertId, didChaincodeId, grantOperate,\nJSONObject.toJSONString(Collections.singletonList(JsonFormat.printer().print(authorize_1))), 0, \"\");\npostClient.postSignedTran(tran_3);\nTimeUnit.SECONDS.sleep(5);\nPeer.TransactionResult tranResult_3 = infoClient.getTranResultByTranId(tranId_3);\nPeer.ActionResult actionResult_3 = tranResult_3.getErr();\nAssertions.assertEquals(0, actionResult_3.getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6388\u6743\u6210\u529f\");\n}\n@Test\n@DisplayName(\"usr-0\u5177\u6709\u4e86\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\uff0c\u56e0\u6b64\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72\u5408\u7ea6\")\n@Order(4)\nvoid testDeployContract() throws InterruptedException, IOException {\n// \u5411\u4e1a\u52a1\u94fe\u63d0\u4ea4\uff0c\u90e8\u7f72\u5408\u7ea6\nString tplString = FileUtils.readFileToString(new File(\"jks/test/tpl/CredenceTPL.scala\"), StandardCharsets.UTF_8);\nPeer.ChaincodeDeploy chaincodeDeploy = Peer.ChaincodeDeploy.newBuilder()\n.setTimeout(5000)\n.setCodePackage(tplString)\n.setLegalProse(\"\")\n.setCType(Peer.ChaincodeDeploy.CodeType.CODE_SCALA)\n.setRType(Peer.ChaincodeDeploy.RunType.RUN_SERIAL)\n.setSType(Peer.ChaincodeDeploy.StateType.STATE_BLOCK)\n.setInitParameter(\"\")\n.setCclassification(Peer.ChaincodeDeploy.ContractClassification.CONTRACT_CUSTOM)\n.build();\nDeployTran deployTran = DeployTran.newBuilder()\n.setTxid(UUID.randomUUID().toString())\n.setCertId(usr0_certId_0)\n.setChaincodeIdScredenceTPLId)\n.setChaincodeDeploy(chaincodeDeploy)\n.build();\n// \u6b64\u6b65\u9aa4\u4e2dusr0\u90e8\u7f72\u5408\u7ea6\u6210\u529f\nDeployTran deployTran_1 = deployTran.toBuilder().setTxid(UUID.randomUUID().toString()).build();\nPeer.Transaction signedDeployTran_1 = usr0_tranCreator_0.createDeployTran(deployTran_1);\npostCredenceClient.postSignedTran(signedDeployTran_1);\nTimeUnit.SECONDS.sleep(5);\nPeer.TransactionResult tranResult_4 = infoCredenceClient.getTranResultByTranId(signedDeployTran_1.getId());\nPeer.ActionResult actionResult_4 = tranResult_4.getErr();\nAssertions.assertEquals(0, actionResult_4.getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u5408\u7ea6\u90e8\u7f72\u6210\u529f\");\n}\n@Test\n@DisplayName(\"usr-0\uff0c\u4f5c\u4e3a\u5408\u7ea6\u90e8\u7f72\u8005\uff0c\u6ce8\u518c\u5408\u7ea6\u91cc\u7684Operate-\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5\")\n@Order(5)\nvoid testSignUpOperate_1() throws InterruptedException, InvalidProtocolBufferException {\n// usr0\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5\u7684Operate\u6210\u529f\uff0c\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4\n//\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411&lt;\u4e1a\u52a1\u94fe&gt;\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d\n//\u5c06\u63d0\u4ea4\u81f3&lt;\u8eab\u4efd\u94fe&gt;\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3&lt;\u4e1a\u52a1\u94fe&gt;\u201cpostCredenceClient\u201d\nlong millis = System.currentTimeMillis();\nPeer.Operate operate = Peer.Operate.newBuilder()\n// \u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5\n.setOpId(DigestUtils.sha256Hex(\"credence-net:CredenceTPL.creProof3\"))\n// \u63cf\u8ff0\u968f\u610f\n.setDescription(\"CredenceTPL.creProof3\")\n.setRegister(\"credence-net:usr-0\")\n// setIsPublish\u8bbe\u7f6e\u65b9\u6cd5\u662f\u5426\u516c\u5f00\uff0c\u6bd4\u5982\u65b0\u6ce8\u518c\u4e86\u4e00\u4e2a\u7528\u6237usr-1\uff0c\u5982\u679c\u662ffalse\u7684\u8bdd\uff0cusr-1\u9700\u8981\u88ab\u6388\u6743\u624d\u80fd\u8c03\u7528creProof3\n// \u5982\u679c\u8bbe\u7f6etrue\uff0c\u65b0\u6ce8\u518c\u7684\u4efb\u4f55\u7528\u6237\uff0c\u90fd\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\n//\u4e5f\u5373\uff0cfalse\u5219\u522b\u7684\u7528\u6237\u9700\u8981\u5f97\u5230\u6388\u6743\u624d\u53ef\u4ee5\u8c03\u7528\uff0ctrue\u5219\u8868\u793a\u516c\u5f00\uff0c\u4efb\u4f55\u4eba(\u6ce8\u518c\u7528\u6237)\u90fd\u53ef\u4ee5\u8c03\u7528\n.setIsPublish(true)\n.setOperateType(Peer.Operate.OperateType.OPERATE_CONTRACT)\n.setAuthFullName(\"credence-net:CredenceTPL.creProof3\") // \u5047\u8bbeCredenceTPL \u6709\u591a\u4e2a\u7248\u672c\n.setCreateTime(Timestamp.newBuilder().setSeconds(millis / 1000).setNanos((int) ((millis % 1000) * 1000000)).build())\n.setOpValid(true)\n.setVersion(\"1.0\")\n.build();\nString tranId = UUID.randomUUID().toString();\nPeer.Transaction tran = usr0_tranCreator_0.createInvokeTran(tranId, usr0_certId_0, didChaincodeId, signUpOperate, JsonFormat.printer().print(operate), 0, \"\");\n// \u5411\u8eab\u4efd\u94fe\u63d0\u4ea4\npostClient.postSignedTran(tran);\nTimeUnit.SECONDS.sleep(5);\nPeer.TransactionResult tranResult = infoClient.getTranResultByTranId(tranId);\nPeer.ActionResult actionResult = tranResult.getErr();\nAssertions.assertEquals(0, actionResult.getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u64cd\u4f5c\u6ce8\u518c\u6210\u529f\");\n}\n@Test\n@DisplayName(\"\u8c03\u7528\u4e1a\u52a1\u94fe\u4e2d\u521a\u90e8\u7f72\u7684\u5408\u7ea6\uff0c\u5b58\u8bc1\u6570\u636e\")\n@Order(6)\nvoid testCredenceProof() throws InterruptedException {\n// usr0\u63d0\u4ea4\u5b58\u8bc1\u4ea4\u6613\uff0c\u5411\u4e1a\u52a1\u94fe\u63d0\u4ea4\nString tranId = UUID.randomUUID().toString();\nPeer.Transaction tran = usr0_tranCreator_0.createInvokeTran(tranId, usr0_certId_0, credenceTPLId,\n\"creProof3\", String.format(\"{\\\"uuid\\\" : \\\"%s\\\",\\\"data\\\" : \\\"{\\\\\\\"data1\\\\\\\": \\\\\\\"xyb002\\\\\\\",\\\\\\\"data2\\\\\\\": \\\\\\\"xyb003\\\\\\\"}\\\"}\", tranId), 0, \"\");\nString tranHex = Hex.encodeHexString(tran.toByteArray());\npostCredenceClient.postSignedTran(tranHex);\nTimeUnit.SECONDS.sleep(5);\nPeer.TransactionResult tranResult = infoCredenceClient.getTranResultByTranId(tranId);\nPeer.ActionResult actionResult = tranResult.getErr();\nAssertions.assertEquals(0, actionResult.getCode(), \"\u5b58\u8bc1\u6210\u529f\");\n}\n}\n</code></pre> <p>\u4f7f\u7528KeyStoreExplorer\uff08\u6216\u8005\u4f7f\u7528\u4ee3\u7801\uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66</p>"},{"location":"RepChain-2.0/#repchain","title":"RepChain\u542f\u52a8\u65b9\u5f0f","text":"<p>RepChain\u662f\u8fd0\u884c\u5728JVM\u4e0a\u7684\uff0c\u56e0\u6b64\u7f16\u8bd1\u6253\u5305RepChain\u5e76\u5b89\u88c5\u4e86jdk13\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u542f\u52a8RepChain\uff0c\u5982\u679c\u6253\u5305\u65f6\u6307\u5b9a\u4e86\u542f\u52a8\u4e3b\u7c7b\uff0c\u53ef\u4ee5\u4e0d\u4f7f\u7528<code>-cp</code>\u53c2\u6570\u6765\u6307\u5b9a\u542f\u52a8\u4e3b\u7c7b</p>"},{"location":"RepChain-2.0/#_28","title":"\u5355\u673a\u591a\u8282\u70b9","text":"<p>\u5e38\u7528\u6765\u6a21\u62df\u6d4b\u8bd5</p> <pre><code>java -cp RepChain.jar rep.app.Repchain\n</code></pre>"},{"location":"RepChain-2.0/#_29","title":"\u5206\u5e03\u5f0f\u5355\u673a\u5355\u8282\u70b9","text":"<p>\u5206\u5e03\u5f0f\u90e8\u7f72\u5355\u673a\u5355\u8282\u70b9\u7684\u65f6\u5019\u5e38\u7528\u5230</p> <pre><code>// \u53ef\u4ee5\u8bbe\u7f6e\u591a\u53c2\u6570\uff0c\u5206\u522b\u4e3a\u8282\u70b9\u540d\njava -cp RepChain.jar rep.app.Repchain_Single \"***.nodex\"\n</code></pre>"},{"location":"RepChain-2.0/#_30","title":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1","text":"<pre><code>// \u53c2\u6570\u90fd\u4e3a\u8282\u70b9\u540d\njava -cp RepChain.jar rep.app.RepChain_Management \"***.node1\" \"***.node2\"\n// \u4e5f\u53ef\u4ee5\u4e0d\u52a0\u53c2\u6570\njava -cp RepChain.jar rep.app.RepChain_Management\n</code></pre>"},{"location":"RepChain-2.0/#repchainmanagement","title":"RepChainManagement","text":"<p>RepChainManagement\u4e3aRepChain\u7684\u6269\u5c55\u670d\u52a1\uff0c\u662f\u7528\u6765\u7ba1\u7406RepChain\u8282\u70b9\u542f\u505c\u7684\u670d\u52a1\uff0c\u8be5\u670d\u52a1\u63d0\u4f9b\u4e86\u7ba1\u7406\u8282\u70b9\u7684API\u63a5\u53e3\uff0c\u5982\uff1a\u4e0a\u4f20\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\u3001\u542f\u52a8\u6216\u505c\u6b62\u8282\u70b9\u7684\u547d\u4ee4\u4ee5\u53ca\u67e5\u8be2\u8282\u70b9\u7684\u72b6\u6001\uff0c\u63a5\u53e3\u63cf\u8ff0\u6587\u6863\u5982\u4e0b\u56feSwagger-UI\u6240\u793a\uff08\u9ed8\u8ba4\u4e3a\uff1ahttp://localhost:7081/swagger/index.html\uff09</p> <p></p>"},{"location":"RepChain-2.0/#_31","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u4e3a\u4e86\u9002\u5e94\u914d\u7f6e\u7c7b\u8bfb\u53d6\u6846\u67b6\uff0cmanagement\u7684\u914d\u7f6e\u6587\u4ef6\u770b\u8d77\u6765\u548c\u8282\u70b9\u7684\u914d\u7f6e\u6587\u4ef6\u51e0\u4e4e\u4e00\u6837\uff0c\u4f46\u662f\u7528\u5230\u7684\u914d\u7f6e\u9879\u53ea\u662f\u5176\u4e2d\u7684\u82e5\u5e72\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3aconf/management/system.conf\uff0c\u5176\u4e2d\u7528\u5230\u7684\u914d\u7f6e\u9879\u6709\u5982\u4e0b\uff1a</p> <p>1.API\u670d\u52a1\u76f8\u5173\u914d\u7f6e</p> <pre><code>#api\u662f\u5426\u5f00\u542f\napi{\nhttp_mode = 0 #http\u534f\u8bae\u6a21\u5f0f 0:http; 1:https \u9ed8\u8ba4\u4f7f\u7528http\nis_need_client_auth = 0 #\u5f53http\u7684\u6a21\u5f0f\u8bbe\u7f6e\u4e3ahttps\u65f6\u6709\u6548\uff0c\u8be5\u914d\u7f6e\u6307https\u65f6\u662f\u5426\u9700\u8981\u5ba2\u6237\u7aef\u9a8c\u8bc1;0=\u4e0d\u9a8c\u8bc1\uff1b1=\u9a8c\u8bc1\nhttp_service_port = 7081#http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba4\u4e3a7081\n}\n</code></pre> <p>2.\u5982\u679c\u5f00\u542fhttps\u7684\u8bdd\uff0c\u8fd9\u91cc\u914d\u7f6ehttps\u76f8\u5173\u5bc6\u94a5\u5e93</p> <pre><code>remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\nartery {\nssl {\n#\u8282\u70b9\u7684ssl\u914d\u7f6e,\u4e3b\u8981\u8bbe\u7f6e\u5bc6\u7801\uff0c\u5bc6\u94a5\u3001\u8bc1\u4e66\u3001\u4fe1\u4efb\u8bc1\u4e66\u8def\u5f84\u5728\u7a0b\u5e8f\u4e2d\u52a8\u6001\u8bbe\u7f6e\nconfig-ssl-engine {\nkey-password = \"123\"\nkey-store-password = \"123\"\ntrust-store-password = \"changeme\"\n}\n}\n}\n}\n</code></pre> <p>3.\u662f\u5426\u4f7f\u7528\u56fd\u5bc6https(\u6682\u65f6\u672a\u5f00\u6e90)</p> <pre><code>gm {\n#\u662f\u5426\u4f7f\u7528\u56fd\u5bc6\u7b97\u6cd5\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u4f7f\u7528java\u56fd\u9645\u6807\u51c6\u5bc6\u7801\u4f53\u7cfb\uff1btrue\u4f7f\u7528\u4e2d\u56fd\u56fd\u5bb6\u5bc6\u7801\u7b97\u6cd5\nis_use_gm = false\n#jce\u5bc6\u7801\u7b97\u6cd5\u63d0\u4f9b\u8005\u7684\u7c7b\u540d\ngm_jce_provider = \"org.bouncycastle.jce.provider.BouncyCastleProvider\"\n#\u5bc6\u7801\u7b97\u6cd5\u63d0\u4f9b\u8005\u6ce8\u518c\u65f6\u7684\u6ce8\u518c\u540d\u79f0\ngm_jce_provider_name = \"BC\"\ngm_jsse_provider = \"org.bouncycastle.jsse.provider.BouncyCastleJsseProvider\"\ngm_jsse_provider_name = \"BCJSSE\"\ngm_pfx_sign_key_name = \"Sig\"\n}\n</code></pre>"},{"location":"RepChain-2.0/#_32","title":"\u4f7f\u7528\u8bf4\u660e","text":"<p>\u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u6765\u7ba1\u7406\u8282\u70b9\uff0c\u6700\u5e38\u4f7f\u7528\u7684\u4e09\u4e2a\u63a5\u53e3\u662fSystemStartUp\u3001SystemStatus\u3001SystemStop</p> <p>1.SystemStartUp</p> <p>\u542f\u52a8\u8282\u70b9\uff08\u524d\u63d0\u662f\u8282\u70b9\u7684\u914d\u7f6e\u90fd\u5df2\u7ecf\u901a\u8fc7API\u6216\u8005\u624b\u52a8\u4e0a\u4f20\u6210\u529f\uff09</p> url http://ip:port/management/system/SystemStartup/${nodeName} method get path parameter nodeName\uff08\u8282\u70b9\u540d\uff09 <p>2.SystemStatus</p> <p>\u67e5\u770b\u8282\u70b9\u72b6\u6001\uff0c\u53ef\u7528\u6765\u67e5\u770b\u8282\u70b9\u662f\u5426\u542f\u52a8\u6210\u529f\u6216\u662f\u5426\u5173\u505c\u6210\u529f</p> url http://ip:port/management/system/SystemStatus/${nodeName} method get path parameter nodeName\uff08\u8282\u70b9\u540d\uff09 <p>3.SystemStop</p> <p>\u5173\u505c\u8282\u70b9</p> url http://ip:port/management/system/SystemStop/${nodeName} method get path parameter nodeName\uff08\u8282\u70b9\u540d\uff09 <p>\u4f7f\u7528RepChainManagement\u80fd\u6210\u529f\u542f\u52a8\u4e00\u4e2a\u8282\u70b9\u7684\u524d\u63d0\u662f\uff1a\u5728\u90e8\u7f72RepChainManagement\u670d\u52a1\u7684\u76ee\u5f55\u4e0b\u6709\u5bf9\u5e94\u8282\u70b9\u7684\u914d\u7f6e\u6587\u4ef6\u3001jks\u6587\u4ef6\u7b49\u8282\u70b9\u8fd0\u884c\u76f8\u5173\u6587\u4ef6\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u6765\u4e0a\u4f20\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6</p> <p>1.\u901a\u8fc7RepChainManagement\u7684API\u63a5\u53e3\u4e0a\u4f20</p> url http://ip:port/management/system/postConfigFile method post Content-Type multipart/form-data request-body 4\u4e2a\u53c2\u6570(\u5206\u522b\u4e3aString, String, String, Binary\u7c7b\u578b)\uff1anode_namefile_typenetwork_nameupload_file <p>request-body\uff1a</p> node_name \u8282\u70b9\u540d\u5b57\uff0c\u5982\uff1a121000005l35120456.node1 file_type pfx_keyjks_keypfx_certjks_keyconfigpfx_trustjks_trustgenesis network_name \u7f51\u7edc\u540d\uff0c\u5982\uff1aidentity-net\u3001credence-net upload_file \u5177\u4f53\u7684\u6587\u4ef6\uff1a\u5982\uff1a121000005l35120456.node1.jks\u3001genesis.json <p>file_type\uff1a</p> pfx_key \u56fd\u5bc6\u7684\u8282\u70b9\u79c1\u94a5\uff08\u56fd\u5bc6\u7ec4\u7f51\u65f6\u4f7f\u7528\uff09\uff0c\u5982\uff1apfx/identity-net/215159697776981712.node1.pfx jks_key \u8282\u70b9\u79c1\u94a5\uff0c\u5982\uff1a121000005l35120456.node1.jks config \u8282\u70b9\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5982\uff1aconf/identity-net/121000005l35120456.node1/system.conf pfx_trust \u8282\u70b9\u7684\u56fd\u5bc6\u7684\u4fe1\u4efb\u5217\u8868\uff08\u56fd\u5bc6\u7ec4\u7f51\u65f6\u4f7f\u7528\uff09\uff0c\u5982\uff1apfx/identity-net/mytruststore.pfx jks_trust \u8282\u70b9\u7684\u4fe1\u4efb\u5217\u8868\uff0c\u5982\uff1ajks/identity-net/mytruststore.jks genesis \u521b\u4e16\u5feb\u914d\u7f6e\u6587\u4ef6\uff08\u65b0\u7ec4\u5efa\u7f51\u7edc\uff09\uff0c\u5982\uff1ajson/identity-net/genesis.json <p>2.\u624b\u52a8\u4e0a\u4f20</p> <p>\u5c06\u6240\u9700\u6587\u4ef6\u914d\u7f6e\u5230management\u670d\u52a1\u7684\u76ee\u5f55\u4e0b\uff0c\u53ef\u53c2\u8003RepChain\u9879\u76ee\u7684\u76ee\u5f55\u914d\u7f6e</p> <p>\u6210\u529f\u5c06\u542f\u52a8\u8282\u70b9\u6240\u9700\u6587\u4ef6\u90fd\u4e0a\u4f20\u5230\u5bf9\u5e94\u76ee\u5f55\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u63a5\u53e3http://ip:port/management/system/SystemStartup/${nodeName}\u6765\u542f\u52a8\u8282\u70b9\u4e86\uff0c\u542f\u52a8\u4e4b\u540e\u8bb0\u5f97\u67e5\u8be2\u8282\u70b9\u72b6\u6001\uff0c\u53ef\u4ee5\u4ece\u5bf9\u5e94\u7684\u5b9e\u65f6\u56fe\u6216\u8005\u63a5\u53e3\u786e\u8ba4\u662f\u5426\u542f\u52a8\u6210\u529f(\u8bf7\u53c2\u8003\u4e0b\u4e00\u7ae0\u8282)</p>"},{"location":"RepChain-2.0/#_33","title":"\u52a8\u6001\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9","text":""},{"location":"RepChain-2.0/#_34","title":"\u7ba1\u7406\u65b9\u6848","text":"<p>RepChain\u9ed8\u8ba4\u662f\u57fa\u4e8eTLSv1.2\u7ec4\u7f51\u7684\uff0c\u56e0\u6b64\u8282\u70b9\u662f\u5426\u62e5\u6709\u53ef\u52a0\u5165\u7f51\u7edc\u7684\u6743\u9650\uff0c\u662f\u53d7\u7f51\u7edc\u4e2d\u5176\u4ed6\u5404\u4e2a\u8282\u70b9\u6240\u7ef4\u62a4\u7684\u4fe1\u4efb\u5217\u8868\u6765\u63a7\u5236\u7684</p> <ul> <li> <p>\u5728RepChain2.0.0\u4e4b\u524d\u7684\u7248\u672c\uff0cRepChain\u7684\u5404\u4e2a\u8282\u70b9\u9ed8\u8ba4\u4f7f\u7528<code>mytruststore.jks</code>\u6765\u4fdd\u5b58\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff08\u5305\u542b\u53c2\u4e0e\u7ec4\u7f51\u7684\u6240\u6709\u8282\u70b9\u8bc1\u4e66\uff09\uff0c\u5982\u679c\u60f3\u8981\u52a0\u5165\u65b0\u7684\u7ec4\u7f51\u8282\u70b9\uff0c\u6709\u4e24\u79cd\u65b9\u6848\uff1a</p> <ul> <li> <p>\u65b9\u6848\u4e00\uff1a\u5c06\u7f51\u7edc\u91cc\u73b0\u6709\u7684\u6240\u6709\u8282\u70b9\u7684<code>mytruststore.jks</code>\u90fd\u66f4\u65b0\uff08\u5c06\u65b0\u7684\u8282\u70b9\u7684\u8bc1\u4e66\u52a0\u5230\u8be5\u5b58\u50a8\u5e93\uff09\uff0c\u7136\u540e\u91cd\u542f\u6240\u6709\u8282\u70b9</p> </li> <li> <p>\u65b9\u6848\u4e8c\uff1a\u5728<code>mytruststore.jks</code>\u4e2d\u9884\u7f6e\u591a\u4e00\u4e9b\u8282\u70b9\u8bc1\u4e66\uff0c\u8fd9\u6837\u65e0\u9700\u91cd\u542f\u7f51\u7edc\uff0c\u4f46\u662f\u4e5f\u65e0\u6cd5\u9884\u4f30\u9884\u7f6e\u591a\u5c11\u5408\u9002</p> </li> </ul> </li> </ul> <p>\u200b       \u4ece\u4e0a\u9762\u4e24\u4e2a\u65b9\u6848\u53ef\u4ee5\u770b\u51fa\uff0c\u65b9\u5f0f\u4e8c\u6bd4\u65b9\u5f0f\u4e00\u7a0d\u5fae\u597d\u4e00\u4e9b\uff0c\u4f46\u4e5f\u4e0d\u662f\u4e00\u52b3\u6c38\u9038</p> <ul> <li> <p>RepChain2.0.0\u53ca\u4e4b\u540e\uff0cRepChain\u7684\u5404\u4e2a\u8282\u70b9\u9996\u6b21\u7ec4\u5efa\u7f51\u7edc\u65f6\uff0c\u4f7f\u7528<code>mytruststore.jks</code>\u6765\u4fdd\u5b58\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff08\u5305\u542b\u53c2\u4e0e\u7ec4\u7f51\u7684\u6240\u6709\u8282\u70b9\u8bc1\u4e66\u7684\u96c6\u5408\uff09\uff0c\u5728\u7ec4\u5efa\u7f51\u7edc\u6210\u529f\u4e4b\u540e\uff0c\u5404\u8282\u70b9\u4f1a\u5c06\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u5199\u5230leveldb\u4e2d\u3002\u4e4b\u540e\uff0c\u4e0d\u8bba\u91cd\u542f\u7f51\u7edc\u8fd8\u662f\u65b0\u589e\u6216\u5220\u9664\u8282\u70b9\u540e\uff0c\u518d\u5efa\u7acbTLSv1.2\u8fde\u63a5\u65f6\uff0c\u4ecd\u8bfb\u53d6\u4fdd\u5b58\u5728leveldb\u4e2d\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff0c\u56e0\u6b64\uff0c2.0.0\u7248\u672c\u5b9e\u73b0\u4e86\u901a\u8fc7\u5408\u7ea6\u6765\u7ba1\u7406\uff08\u65b0\u589e\u6216\u5220\u9664\uff09\u5b58\u653e\u5728leveldb\u4e2d\u7684\u7ec4\u7f51\u8282\u70b9\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u3002\u5982\u679c\u60f3\u5f15\u5165\u65b0\u8282\u70b9\u5230\u73b0\u6709\u7f51\u7edc\uff0c\u9700\u7531\u5177\u6709\u6743\u9650\u7684\u7528\u6237\u5148\u8c03\u7528\u5bf9\u5e94\u7684\u8282\u70b9\u7ba1\u7406\u5408\u7ea6\u6765\u66f4\u65b0\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u3002</p> <ul> <li>\u5bf9\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u589e\u52a0\u65b0\u7684\u8282\u70b9\u8bc1\u4e66\uff0c\u4e4b\u540e\u52a0\u5165\u65b0\u7684\u8282\u70b9\u5230\u73b0\u6709\u7f51\u7edc\u65f6\uff0c\u7f51\u7edc\u91cc\u7684\u6240\u6709\u8282\u70b9\u4f1a\u91cd\u6784TrustKeyStore\uff0c\u65b0\u7684\u8282\u70b9\u5c31\u53ef\u4ee5\u6210\u529f\u7684\u4e0e\u5176\u4ed6\u8282\u70b9\u5efa\u7acbTLS\u8fde\u63a5</li> </ul> <p>\u6d4b\u8bd5\u7528\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L183</p> <ul> <li>\u5bf9\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u5220\u9664\u67d0\u4e2a\u8282\u70b9\u8bc1\u4e66\uff0c\u7f51\u7edc\u91cc\u7684\u6240\u6709\u8282\u70b9\u4f1a\u91cd\u6784TrustKeyStore\uff0c\u8282\u70b9down\u6389\u4e4b\u540e\uff0c\u5c31\u518d\u4e5f\u52a0\u5165\u4e0d\u5230\u7f51\u7edc\u91cc\u4e86</li> </ul> <p>\u6d4b\u8bd5\u7528\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L162</p> </li> </ul>"},{"location":"RepChain-2.0/#_35","title":"\u4f7f\u7528\u6d41\u7a0b","text":"<p>\u4e0b\u9762\u5bf9\u5728RepChain2.0.0\u52a8\u6001\u7ba1\u7406\uff08\u52a0\u5165\u6216\u9000\u51fa\uff09\u7ec4\u7f51\u8282\u70b9\u505a\u4ecb\u7ecd\uff08\u53ef\u53c2\u8003rcjava-core\u4e2d\u7684\u6d4b\u8bd5\u7528\u4f8b\uff09\uff0c\u4f7f\u7528\u5408\u7ea6\u7684\u8be6\u7ec6\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>\u6ce8\uff1a\u76ee\u524d\u8282\u70b9\u7ba1\u7406\u5408\u7ea6\u5e76\u672a\u5185\u7f6e\u5230\u521b\u4e16\u5757\u4e2d\uff0c\u56e0\u6b64\u9700\u8981\u5148\u90e8\u7f72\u5408\u7ea6</p> <p>1.\u9996\u5148\u660e\u786e\uff0c\u8981\u7ba1\u7406\u7684\u7f51\u7edc\u662f\u54ea\u4e2a\u7f51\u7edc</p> <p>\u5047\u8bbe\u8981\u7ba1\u7406\u7684\u662fcredence-net</p> <p>2.\u83b7\u5f97\u53ef\u4ee5\u90e8\u7f72\u7ba1\u7406\u5408\u7ea6\uff08ManageNodeCert\uff09\u5230\u8be5\u7f51\u7edc\u7684\u6743\u9650</p> <pre><code>@Test\n@DisplayName(\"superAdmin\u6ce8\u518cOperate-\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6credence-net:*.deploy\u7684\u64cd\u4f5c\")\n@Order(1)\nvoid signUpOperate() throws InterruptedException, IOException {\n// superAdmin\u6ce8\u518c\u90e8\u7f72\u5408\u7ea6credence-net:ManageNodeCert.deploy\u7684\u64cd\u4f5c\uff0c\u5411&lt;\u8eab\u4efd\u94fe&gt;\u63d0\u4ea4\nlong millis_1 = System.currentTimeMillis();\nPeer.Operate operate = Peer.Operate.newBuilder()\n// \u4e5f\u53ef\u4ee5\u662fcredence-net:ManageNodeCert.deploy\n.setOpId(DigestUtils.sha256Hex(\"credence-net:*.deploy\"))\n.setDescription(\"\u90e8\u7f72\u5b58\u8bc1\u5408\u7ea6-\u4efb\u610f\u5408\u7ea6\u7684\u6743\u9650\")\n.setRegister(\"identity-net:951002007l78123233\")\n.setIsPublish(false)\n.setOperateType(Peer.Operate.OperateType.OPERATE_CONTRACT)\n.setAuthFullName(\"credence-net:*.deploy\")\n.setCreateTime(Timestamp.newBuilder().setSeconds(millis_1 / 1000).setNanos((int) ((millis_1 % 1000) * 1000000)).build())\n.setOpValid(true)\n.setVersion(\"1.0\")\n.build();\nString tranId_2 = UUID.randomUUID().toString();\n// \u8c03\u7528\u8eab\u4efd\u7ba1\u7406\u5408\u7ea6\nPeer.Transaction tran_2 = superCreator.createInvokeTran(tranId_2, superCertId, didChaincodeId, signUpOperate, JsonFormat.printer().print(operate), 0, \"\");\npostClient.postSignedTran(tran_2);\n}\n</code></pre> <p>3.\u90e8\u7f72\u7ba1\u7406\u5408\u7ea6\uff0c\u5e76\u6ce8\u518c\u5bf9\u5e94\u7684\u64cd\u4f5c</p> <pre><code>@Test\n@DisplayName(\"SuperAdmin\u90e8\u7f72\u8282\u70b9\u8bc1\u4e66\u7ba1\u7406\u5408\u7ea6\")\n@Order(2)\nvoid deployContractTest() throws InterruptedException, IOException {\nString tplString = FileUtils.readFileToString(new File(\"jks/test/tpl/ManageNodeCert.scala\"), StandardCharsets.UTF_8);\nPeer.ChaincodeDeploy chaincodeDeploy = Peer.ChaincodeDeploy.newBuilder()\n.setTimeout(5000)\n.setCodePackage(tplString)\n.setLegalProse(\"\")\n.setCType(Peer.ChaincodeDeploy.CodeType.CODE_SCALA)\n.setRType(Peer.ChaincodeDeploy.RunType.RUN_SERIAL)\n.setSType(Peer.ChaincodeDeploy.StateType.STATE_BLOCK)\n.setInitParameter(\"\")\n.setCclassification(Peer.ChaincodeDeploy.ContractClassification.CONTRACT_CUSTOM)\n.build();\nDeployTran deployTran = DeployTran.newBuilder()\n.setTxid(UUID.randomUUID().toString())\n.setCertId(superCertId)\n.setChaincodeId(manageNodeCertId)\n.setChaincodeDeploy(chaincodeDeploy)\n.build();\ndeployTran = deployTran.toBuilder().setTxid(UUID.randomUUID().toString()).build();\nPeer.Transaction signedDeployTran = credenceSuperCreator.createDeployTran(deployTran);\npostCredenceClient.postSignedTran(signedDeployTran);\nTimeUnit.SECONDS.sleep(5);\nPeer.TransactionResult tranResult = infoCredenceClient.getTranResultByTranId(signedDeployTran.getId());\nPeer.ActionResult actionResult = tranResult.getErr();\nAssertions.assertEquals(0, actionResult.getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u90e8\u7f72\u5408\u7ea6\u6210\u529f\");\n}\n@Test\n@DisplayName(\"\u6ce8\u518cOperate-\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5---updateNodeCert\")\n@Order(3)\nvoid testSignUpOperate() throws InterruptedException, InvalidProtocolBufferException {\nlong millis = System.currentTimeMillis();\nPeer.Operate operate = Peer.Operate.newBuilder()\n.setOpId(DigestUtils.sha256Hex(\"credence-net:ManageNodeCert.updateNodeCert\"))\n.setDescription(\"\u7ba1\u7406\u8282\u70b9\u8bc1\u4e66\")\n.setRegister(super_creditCode)\n.setIsPublish(false)\n.setOperateType(Peer.Operate.OperateType.OPERATE_CONTRACT)\n.setAuthFullName(\"credence-net:ManageNodeCert.updateNodeCert\")\n.setCreateTime(Timestamp.newBuilder().setSeconds(millis / 1000).setNanos((int) ((millis % 1000) * 1000000)).build())\n.setOpValid(true)\n.setVersion(\"1.0\")\n.build();\nString tranId = UUID.randomUUID().toString();\nPeer.Transaction tran = superCreator.createInvokeTran(tranId, superCertId, didChaincodeId, signUpOperate, JsonFormat.printer().print(operate), 0, \"\");\npostClient.postSignedTran(tran);\nTimeUnit.SECONDS.sleep(5);\nPeer.TransactionResult tranResult = infoClient.getTranResultByTranId(tranId);\nPeer.ActionResult actionResult = tranResult.getErr();\nAssertions.assertEquals(0, actionResult.getCode(), \"\u6ca1\u6709\u9519\u8bef\uff0c\u64cd\u4f5c\u6ce8\u518c\u6210\u529f\");\n}\n</code></pre> <p>4.\u8c03\u7528\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5\u6765\u6dfb\u52a0\u6216\u8005\u5220\u9664\u54cd\u5e94\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5177\u4f53\u7684\u4f7f\u7528\u7ec6\u8282\uff0c\u4ea4\u6613\u6784\u9020\uff0c\u5408\u7ea6\u65b9\u6cd5\u4ee5\u53ca\u5408\u7ea6\u53c2\u6570\u5982\u4e0b\uff1a</p> <pre><code>@Test\n@DisplayName(\"\u63d0\u4ea4\u4ea4\u6613\uff0c\u589e\u52a0\u8bc1\u4e66\")\n@Order(5)\nvoid testAddCert() throws IOException, InterruptedException {\nString tranId = UUID.randomUUID().toString();\nHashMap&lt;String, String&gt; certMap = new HashMap&lt;&gt;();\n// \u8bfb\u53d6pem\u5b57\u7b26\u4e32\ncertMap.put(\"node11Name\", FileUtils.readFileToString(new File(\"jks/test/multi_chain/\" + node11Name + \".cer\"), StandardCharsets.UTF_8));\nPeer.Transaction tran = credenceSuperCreator.createInvokeTran(tranId, superCertId, manageNodeCertId, \"updateNodeCert\", JSON.toJSONString(certMap), 0, \"\");\npostCredenceClient.postSignedTran(tran);\n}\n@Test\n@DisplayName(\"\u63d0\u4ea4\u4ea4\u6613\uff0c\u5220\u9664\u8bc1\u4e66\")\n@Order(4)\nvoid testDeleteCert() throws IOException, InterruptedException {\nString tranId = UUID.randomUUID().toString();\nHashMap&lt;String, String&gt; certMap = new HashMap&lt;&gt;();\n// \u7f6e\u7a7a\u5373\u53ef\ncertMap.put(\"node11Name\", \"\");\nPeer.Transaction tran = credenceSuperCreator.createInvokeTran(tranId, superCertId, manageNodeCertId, \"updateNodeCert\", JSON.toJSONString(certMap), 0, \"\");\npostCredenceClient.postSignedTran(tran);\n}\n</code></pre> <p>\u9664\u4e86\u4e0a\u9762\u8bf4\u7684\u8981\u63d0\u4ea4\u4ea4\u6613\u8c03\u7528\u5408\u7ea6\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u914d\u5408\u7ba1\u7406\u670d\u52a1\uff08RepChainManagement\uff09\u6765\u542f\u505c\u8282\u70b9</p> <p>1.\u8c03\u7528\u5408\u7ea6\u5220\u9664\u8282\u70b9\u8bc1\u4e66\u540e\uff0c\u901a\u8fc7\u5bf9\u5e94\u7684RepChainManagement\u6765ShutDown\u5bf9\u5e94\u7684\u8282\u70b9</p> <p>\u5982\u679c\u8be5\u8282\u70b9\u662f\u901a\u8fc7RepChainManagement\u542f\u52a8\u7684\uff0c\u5219\u901a\u8fc7RepChainManagement\u6765ShutDown\uff1b\u5982\u679c\u662f\u4f5c\u4e3a\u5355\u72ec\u7684\u8fdb\u7a0b\u542f\u52a8\u7684\uff0c\u5219\u624b\u52a8shutdown\u5373\u53ef</p> <p>2.\u8c03\u7528\u5408\u7ea6\u65b0\u589e\u8282\u70b9\u8bc1\u4e66\u540e\uff0c\u901a\u8fc7\u5bf9\u5e94\u7684RepChainManagement\u6765StartUp\u5bf9\u5e94\u7684\u8282\u70b9</p> <p>\u8be5\u8282\u70b9\u53ef\u4ee5\u901a\u8fc7RepChainManagement\u542f\u52a8\uff0c\u4e5f\u53ef\u624b\u52a8\u6765StartUp</p>"},{"location":"RepChain-2.0/#_36","title":"\u9a8c\u8bc1\u65b9\u5f0f","text":"<p>\u53ef\u4ee5\u6309\u5982\u4e0b\u65b9\u5f0f\u6765\u9a8c\u8bc1\u65b0\u589e\u8282\u70b9\u662f\u5426\u6210\u529f</p> <ul> <li> <p>\u901a\u8fc7\u63a5\u53e3\u67e5\u8be2\u8282\u70b9\u6570</p> <p>1.\u5411\u7f51\u7edc\u4e2d\u539f\u6709\u7684\u8282\u70b9API\u67e5\u8be2\u7f51\u7edc\u8282\u70b9\u603b\u6570\u662f\u5426\u589e\u52a0\uff0c\u540c\u65f6\u5411\u65b0\u589e\u7684\u8282\u70b9API\u67e5\u8be2\u8fd4\u56de\u7ed3\u679c\u662f\u5426\u548c\u7f51\u7edc\u539f\u6709\u8282\u70b9\u4e00\u81f4</p> <p>\u67e5\u8be2\u8282\u70b9\u6570\uff1ahttp://ip:port/chaininfo/node</p> </li> <li> <p>\u540c\u65f6\u53ef\u67e5\u8be2\u65b0\u589e\u8282\u70b9\u7684chaininfo\u662f\u5426\u6709\u53d8\u5316</p> <p>1.\u6b63\u5e38\u662f\u4f1a\u540c\u6b65\u533a\u5757\u7684\uff0c\u56e0\u6b64\u5176chaininfo\u4e2d\u663e\u793a\u7684\u9ad8\u5ea6\u9010\u6e10\u53d8\u9ad8\uff0c\u5e76\u6700\u7ec8\u548c\u5176\u4ed6\u8282\u70b9\u4e00\u81f4</p> <p>\u67e5\u8be2\u94fe\u4fe1\u606f\uff1ahttp://ip:port/chaininfo</p> </li> <li> <p>\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u5bf9\u5e94\u8282\u70b9\u7684\u5b9e\u65f6\u56fe</p> <p>1.\u5982\u679c\u65b0\u589e\u8282\u70b9\u53ef\u4ee5\u6b63\u5e38\u663e\u793a\u4e0e\u7f51\u7edc\u5185\u5176\u4ed6\u8282\u70b9\u4e00\u81f4\u7684\u5b9e\u65f6\u56fe\uff0c\u90a3\u4e48\u662f\u6ca1\u95ee\u9898\u7684</p> <p>\u524d\u7aef\u5b9e\u65f6\u56fe\uff1ahttp://ip:port/web/g1.html</p> </li> </ul>"},{"location":"RepChain-2.0/#_37","title":"\u52a8\u6001\u7ba1\u7406\u5171\u8bc6\u5217\u8868","text":""},{"location":"RepChain-2.0/#_38","title":"\u7ba1\u7406\u65b9\u6848","text":"<ul> <li> <p>RepChain2.0.0\u4e4b\u524d\u7684\u7248\u672c\uff0c\u57fa\u4e8e\u914d\u7f6e\u91cc\u7684\u62bd\u7b7e\u5217\u8868\u8fdb\u884c\u62bd\u7b7e\u9009\u62e9\u51fa\u5757\u4eba\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539\u62bd\u7b7e\u5217\u8868\uff08\u5171\u8bc6\u8282\u70b9\u5217\u8868\uff09\uff0c\u9700\u8981\u4fee\u6539\u6240\u6709\u8282\u70b9\u7684\u914d\u7f6e\uff0c\u5e76\u91cd\u542f\u6574\u4e2a\u96c6\u7fa4\u7f51\u7edc</p> </li> <li> <p>RepChain2.0.0\u53ca\u4e4b\u540e\uff0c\u5b9e\u73b0\u4e86\u901a\u8fc7\u5408\u7ea6\u7ba1\u7406RepChain\u7684\u5171\u8bc6\u62bd\u7b7e\u5217\u8868\uff0c\u65e0\u9700\u518d\u4fee\u6539\u914d\u7f6e\u5e76\u91cd\u542f\u6574\u4e2a\u7f51\u7edc\u4e86\uff0c\u5373\u53ef\u4ee5\u5728\u7ebf\u52a8\u6001\u4fee\u6539\u62bd\u7b7e\u5217\u8868</p> <p>\u6d4b\u8bd5\u7528\u4f8b\uff1ahttps://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L230</p> </li> </ul>"},{"location":"RepChain-2.0/#_39","title":"\u4f7f\u7528\u6d41\u7a0b","text":"<p>\u5728\u4e0a\u4e00\u7ae0\u8282(ManageNodeCert\u7684\u5408\u7ea6\u5df2\u7ecf\u90e8\u7f72)\u7684\u57fa\u7840\u4e0a</p> <p>1.\u9996\u5148superAdmin\u4e3a\u81ea\u5df1\u6ce8\u518cupdateVoteList\u64cd\u4f5c</p> <pre><code>@Test\n@DisplayName(\"\u6ce8\u518cOperate-\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5---updateVoteList\")\n@Order(6)\nvoid testSignUpOperate_1() throws InterruptedException, InvalidProtocolBufferException {\nlong millis = System.currentTimeMillis();\nPeer.Operate operate = Peer.Operate.newBuilder()\n.setOpId(DigestUtils.sha256Hex(\"credence-net:ManageNodeCert.updateVoteList\"))\n.setDescription(\"\u7ba1\u7406\u62bd\u7b7e\u5217\u8868\")\n.setRegister(super_creditCode)\n.setIsPublish(false)\n.setOperateType(Peer.Operate.OperateType.OPERATE_CONTRACT)\n.setAuthFullName(\"credence-net:ManageNodeCert.updateVoteList\")\n.setCreateTime(Timestamp.newBuilder().setSeconds(millis / 1000).setNanos((int) ((millis % 1000) * 1000000)).build())\n.setOpValid(true)\n.setVersion(\"1.0\")\n.build();\nString tranId = UUID.randomUUID().toString();\nPeer.Transaction tran = superCreator.createInvokeTran(tranId, superCertId, didChaincodeId, signUpOperate, JsonFormat.printer().print(operate), 0, \"\");\npostClient.postSignedTran(tran);\n}\n</code></pre> <p>2.superAdmin\u8c03\u7528\u8be5\u65b9\u6cd5(\"updateVoteList\")\u6765\u4fee\u6539\u5171\u8bc6\u5217\u8868</p> <p>\u4ea4\u6613\u53c2\u6570\u4e3a\u53c2\u4e0e\u5171\u8bc6\u7684\u8282\u70b9\u540d\u5217\u8868</p> <pre><code>@Test\n@DisplayName(\"\u63d0\u4ea4\u4ea4\u6613\uff0c\u66f4\u65b0\u62bd\u7b7e\u5217\u8868\")\n@Order(7)\nvoid testUpdateVoteList() throws InterruptedException {\nString tranId = UUID.randomUUID().toString();\n// \u6700\u65b0\u7684\u5171\u8bc6\u5217\u8868\nList&lt;String&gt; voteList = Arrays.asList(\"330597659476689954.node6\", \"044934755127708189.node7\",\n//                \"201353514191149590.node8\",\n\"734747416095474396.node9\", \"710341838996249513.node10\");\nPeer.Transaction tran = credenceSuperCreator.createInvokeTran(tranId, superCertId, manageNodeCertId, \"updateVoteList\", JSON.toJSONString(voteList), 0, \"\");\npostCredenceClient.postSignedTran(tran);\n}\n</code></pre>"},{"location":"RepChain-2.0/#_40","title":"\u9a8c\u8bc1\u65b9\u5f0f","text":"<ul> <li> <p>\u901a\u8fc7\u63a5\u53e3\u67e5\u8be2\u8282\u70b9\u6570</p> <p>1.\u5411\u7f51\u7edc\u4e2d\u7684\u8282\u70b9API\u67e5\u8be2\u7f51\u7edc\u5171\u8bc6\u8282\u70b9\u6570\u662f\u5426\u53d1\u751f\u53d8\u5316</p> <p>\u67e5\u8be2\u8282\u70b9\u6570\uff1ahttp://ip:port/chaininfo/node</p> </li> <li> <p>\u63d0\u4ea4\u4fee\u6539\u5171\u8bc6\u5217\u8868\u7684\u4ea4\u6613\u5e76\u5165\u5757\u4e4b\u540e\uff0c\u53ef\u4ee5\u5728\u524d\u7aef\u5b9e\u65f6\u56fe\u4e0a\u770b\u5230\u6539\u53d8\uff0c\u4e0b\u9762\u4ee5\u4f8b\u5b50\u8fdb\u884c\u8bf4\u660e\uff1a</p> <p>1.\u5047\u8bbe\u539f\u6765\u5177\u67095\u4e2a\u5171\u8bc6\u8282\u70b9\uff0c\u5206\u522b\u4e3a\"330597659476689954.node6\", \"044934755127708189.node7\", \"201353514191149590.node8\", \"734747416095474396.node9\", \"710341838996249513.node10\"\uff0c\u53ef\u4ee5\u4ece\u5b9e\u65f6\u56fe\u770b\u5230\u4e0b\u56fe(\u4e3b\u8981\u5173\u6ce8\u5708\u4e0a\u7684\u8282\u70b9\u6570\uff0c\u5176\u4ed6\u6570\u636e\u4e3a\u6a21\u62df\u7684\u975e\u91cd\u70b9\u6570\u636e)\uff1a</p> <p></p> <p>2.\u63d0\u4ea4\u4fee\u6539\u5171\u8bc6\u5217\u8868\u7684\u4ea4\u6613\uff0c\u5c06node8\u8e22\u51fa\u5171\u8bc6\u5217\u8868\uff0c\u5b9e\u65f6\u56fe\u53d8\u4e3a\u5982\u4e0b(\u4e3b\u8981\u5173\u6ce8\u5708\u4e0a\u7684\u8282\u70b9\u6570\uff0c\u5176\u4ed6\u6570\u636e\u4e3a\u6a21\u62df\u7684\u975e\u91cd\u70b9\u6570\u636e)\uff1a</p> <p></p> <p>3.\u901a\u8fc7\u5b9e\u65f6\u56fe\u4e0a\u8282\u70b9\u7684\u53d8\u5316\uff0c\u53ef\u4ee5\u770b\u51fa\u5171\u8bc6\u8282\u70b9\u6570\u5c11\u4e86\u8282\u70b98\uff0c\u5171\u8bc6\u5217\u8868\u4fee\u6539\u6210\u529f</p> </li> </ul>"},{"location":"RepChain-2.0/#qa","title":"Q&amp;A","text":"<ul> <li>\u5224\u65ad\u4ea4\u6613\u662f\u5426\u4e0a\u94fe</li> </ul> <p>\u67e5\u8be2\u4ea4\u6613\u5728\u533a\u5757\u4e2d\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5373TransactionResult</p>"},{"location":"deploy/","title":"RepChain\u90e8\u7f72","text":""},{"location":"deploy/#_1","title":"\u2014\u2014\u5355\u94fe\u6a21\u5f0f","text":"<p>\u5355\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u540c\u65f6\u8d1f\u8d23\u4e1a\u52a1</p> <p></p> <p>1.\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u7684levelDB</p> <p>2.\u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo</code>\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09</p> <ul> <li>RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883</li> </ul> <p>\u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c<code>NAT</code>\u6216<code>docker</code>\u73af\u5883</p> <ul> <li>RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883</li> </ul> <p>\u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker</p> <ul> <li>\u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f</li> </ul> <p>\u4f7f\u7528<code>jar</code>\u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a</p> <ul> <li>RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f</li> </ul> <p>\u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1</p> <p>1.\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6</p> <p>2.\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a</p> <p>3.\u8282\u70b9\u7ba1\u7406\u670d\u52a1</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b</p>"},{"location":"deploy/#_2","title":"\u7f16\u8bd1\u6253\u5305","text":"<ul> <li>\u73af\u5883\u9700\u6c42\uff1a</li> </ul> <p>1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G</p> <p>\u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684\u57fa\u7840\u8fd0\u884c\u73af\u5883\u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09</p> <p>2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350Azul-zuluJdk\uff0c\u4e5f\u53ef\u4f7f\u7528Oracle-Jdk</p> <p>3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf</p> <p>4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd</p> <p>5.Git\uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d\u538b\u7f29\u5305\uff09</p> <p>6.\u7f16\u8bd1\u5de5\u5177\uff1aSbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1\u5b98\u65b9\u6559\u7a0b\uff1b\u6216 \u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u7684IDEA\uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1\u5b98\u65b9\u6559\u7a0b</p> <ul> <li>\u4e0b\u8f7d\u6e90\u7801\uff1a</li> </ul> <p>1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>     git clone https://gitee.com/BTAJL/repchain.git\n     cd repchain\n     git fetch\n     git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC\n</code></pre> <p>\u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u538b\u7f29\u5305\uff0c\u5e76\u89e3\u538b\u4e3arepchain</p> <p>2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684<code>mainClass</code>\uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.Repchain</code>\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.Repchain_Single</code>\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.RepChain_Management</code>\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>     # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\nmainClass in (Compile, packageBin) := Some(\"rep.app.Repchain\")\n# \u6216\n# \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\nmainClass in (Compile, packageBin) := Some(\"rep.app.Repchain_Single\")\n# \u6216\n# \u8282\u70b9\u7ba1\u7406\u670d\u52a1\nmainClass in (Compile, packageBin) := Some(\"rep.app.RepChain_Management\")\n</code></pre> <p>RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684<code>leveldbjni</code>\u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684<code>leveldb-jni</code>\u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e<code>leveldb-jni</code>\u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>     # \u5c06\nlibraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\"\n# \u66ff\u6362\u4e3a\nlibraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\"\n# \u6216\nlibraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\"\n</code></pre> <p>3.\u7f16\u8bd1\u5e76\u6253\u5305</p> <p>\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528<code>sbt-shell</code>\uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528<code>sbt-repl</code>\uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a</p> <ul> <li>\u5728IDEA\u4e2d\u6253\u5f00<code>sbt shell</code>\u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean-&gt;compile-&gt;assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a</li> </ul> <pre><code>       sbt:RepChain&gt; clean sbt:RepChain&gt; compile sbt:RepChain&gt; assembly\n</code></pre> <ul> <li>\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528<code>sbt-repl</code>\uff0c\u8f93\u5165<code>sbt</code>\u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a</li> </ul> <pre><code>       &gt; clean &gt; compile &gt; assembly\n</code></pre> <p>4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728<code>repchain/target/scala-2.12/RepChain.jar</code>\uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b</p> <ul> <li>\u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a</li> </ul> <p>1.\u4f7f\u7528IDEA\u4e2d\u7684<code>sbt-shell</code></p> <p></p> <p>2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09</p> <p></p>"},{"location":"deploy/#_3","title":"\u90e8\u7f72","text":"<p>\u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd</p>"},{"location":"deploy/#_4","title":"\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9","text":"<p>\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe5\u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.Repchain</code></p> <p></p> <ul> <li> <p>\u73af\u5883\u9700\u6c42\uff1a</p> <ul> <li>\u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G</li> <li>Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350Azul-zuluJdk\uff0c\u4e5f\u53ef\u4f7f\u7528Oracle-Jdk</li> </ul> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6</p> </li> </ul> <p>\u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a<code>repchain/conf/121000005l35120456.node1/system.conf</code></p> <ul> <li> <p><code>system.conf</code>\u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879</p> <ul> <li>1.<code>system.httpServicePort= 9081</code> \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 </li> <li>2.<code>system.contractOperationMode = 1</code>\uff0c\u4ee5<code>jar</code>\u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1</li> <li>3.<code>system.trans_create_type=0</code> \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09</li> <li>4.<code>sytetem.storage.dbpath</code>\uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e</li> <li>5.<code>sytetem.storage.blockpath</code>\uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e</li> </ul> </li> <li> <p>\u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</p> </li> </ul> <pre><code> # \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b\njava -jar RepChain.jar\n</code></pre> <p>\u6216</p> <pre><code> # \u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.Repchain\n</code></pre> <ul> <li> <p>\u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f</p> <ul> <li>\u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165<code>http://localhost:9081/chaininfo/node</code>\uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165<code>curl http://localhost:9081/chaininfo/node</code>\uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f</li> </ul> <p></p> <ul> <li>\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165<code>http://localhost:9081/web/g1.html</code>\uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f</li> </ul> <p></p> </li> <li> <p>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898</p> <ul> <li> <p>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</p> </li> <li> <p>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a</p> <ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650</li> </ul> </li> </ul> </li> <li> <p>\u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e5\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b<code>rep.app.RepChain</code>\u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b</p> <ul> <li>\u51c6\u5907\u5de5\u4f5c</li> </ul> <p>1.<code>jks/identity-net</code>\u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528Kse\u6216\u8005\u4ee3\u7801\u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c<code>***.nodex</code>\uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b</p> <p></p> <p></p> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u65b0\u589e\u8282\u70b9node6-nodeN\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u9700\u8981\u989d\u5916\u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a</p> <p>1.<code>chain_cert_name = \"identity-net:951002007l78123233.super_admin\"</code>\uff0c\u5355\u94fe\u6a21\u5f0f\u4e0b\u8bbe\u7f6e\u4ee5<code>identity-net</code>\u8eab\u4efd\u94fe\u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin</p> <p>2.<code>chain_network_id = \"identity-net\"</code>\uff0c\u7ec4\u7f51id\uff0c\u5355\u94fe\u6a21\u5f0f\u4e0b\u8bbe\u7f6e\u4e3a<code>identity-net</code>\uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26</p> <p>3.<code>basic_chain_id = \"identity-net\"</code>\uff0c\u5404\u79cd\u6a21\u5f0f\u4e0b\u5747\u8bbe\u7f6e\u4e3a<code>identity-net</code></p> <p>3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b<code>rep.app.RepChain</code>\u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b</p> <p>4.\u7f16\u8bd1\u6253\u5305\u4ee5\u53ca\u90e8\u7f72\u7684\u5176\u4ed6\u5185\u5bb9\u4e0e\u524d\u8ff0\u4e00\u81f4</p> <ul> <li>\u542f\u52a8\u65b9\u5f0f</li> </ul> <p>\u8bf7\u67e5\u770b\u6e90\u7801<code>src/main/scala/rep/app/RepChain.scala</code></p> <pre><code>  java -cp RepChain.jar rep.app.RepChain\n</code></pre> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a5\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c6~N\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66</p> <p></p>"},{"location":"deploy/#_5","title":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9","text":"<p>\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u542f\u52a81\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.Repchain_Single</code></p> <p></p> <ul> <li>\u7f51\u7edc\u90e8\u7f72</li> </ul> <p>\u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4</p> <ul> <li> <p>\u542f\u52a8\u65b9\u5f0f\u4ee5node1\u3001node2\u7684\u4e3a\u4f8b</p> <ul> <li>\u5728node1\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</li> </ul> <pre><code>java -jar RepChain.jar \"121000005l35120456.node1\" # \u6216\u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\"\n</code></pre> <ul> <li>\u5728node2\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</li> </ul> <pre><code>java -jar RepChain.jar \"12110107bi45jh675g.node2\" # \u6216\u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.Repchain_Single \"12110107bi45jh675g.node2\"\n</code></pre> </li> <li> <p>ip\u4e0eport\u7684\u914d\u7f6e</p> <ul> <li>\u975eNAT\u6216\u975edocker\u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"192.168.2.136\"    # \u5c40\u57df\u7f51ip\ncanonical.port = 8082                   # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9&lt;seed-nodes&gt;\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p>\u6ce8\uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879&lt;seed-nodes&gt;\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879&lt;seed-nodes&gt;\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3</p> <p></p> <p></p> <p></p> <ul> <li>NAT\u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>  remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"139.10.1.3\"     # \u5916\u90e8\u5730\u5740\ncanonical.port = 8082                 # \u5916\u90e8\u7aef\u53e3\nbind.hostname = \"192.168.2.136\"       # \u5c40\u57df\u7f51\u5730\u5740\nbind.port = 8082                      # \u5c40\u57df\u7f51\u7aef\u53e3\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e861\u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684\u5185\u90e8\u6216\u5916\u90e8\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p></p> <p></p> <p></p> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5<code>node1</code>\u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4</p> <p></p> <ul> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898<ul> <li>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</li> <li>\u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5<ul> <li>\u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3</li> <li>\u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25</li> </ul> </li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0<ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650</li> </ul> </li> </ul> </li> </ul>"},{"location":"deploy/#_6","title":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1","text":"<p>\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.RepChain_Management</code></p> <ul> <li>\u7f51\u7edc\u90e8\u7f72<ul> <li>\u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe5\u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9</li> <li>\u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4</li> </ul> </li> <li> <p>\u542f\u52a8\u65b9\u5f0f</p> <ul> <li>\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1-node5\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</li> </ul> <pre><code>      java  -jar RepChain.jar \"121000005l35120456.node1\" \"12110107bi45jh675g.node2\" \"122000002n00123567.node3\" \"921000005k36123789.node4\"   \"921000006e0012v696.node5\" </code></pre> </li> <li> <p>ip\u4e0eport\u7684\u914d\u7f6e</p> <ul> <li>\u975eNAT\u6216\u975edocker\u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>   remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"192.168.2.136\"    # \u5c40\u57df\u7f51ip\ncanonical.port = 8082                 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9&lt;seed-nodes&gt;\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p>\u6ce8\uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879&lt;seed-nodes&gt;\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879&lt;seed-nodes&gt;\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3</p> <p></p> <p></p> <p></p> <ul> <li>NAT\u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>  remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"139.10.1.3\"     # \u5916\u90e8\u5730\u5740\ncanonical.port = 8082                 # \u5916\u90e8\u7aef\u53e3\nbind.hostname = \"192.168.2.136\"       # \u5c40\u57df\u7f51\u5730\u5740\nbind.port = 8082                      # \u5c40\u57df\u7f51\u7aef\u53e3\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e861\u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684\u5185\u90e8\u6216\u5916\u90e8\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p></p> <p></p> <p></p> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5<code>node1</code>\u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4</p> <p></p> <ul> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898<ul> <li>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</li> <li>\u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5<ul> <li>\u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3</li> <li>\u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25</li> </ul> </li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0<ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650</li> </ul> </li> </ul> </li> </ul>"},{"location":"deploy/#_7","title":"\u9644\u5f55","text":""},{"location":"deploy/#_8","title":"\u521b\u4e16\u5757\u7684\u6784\u5efa","text":"<p>\u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo</code>\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09</p>"},{"location":"deploy/#_9","title":"\u8282\u70b9\u5bc6\u94a5\u66ff\u6362","text":"<p>\u9ed8\u8ba4\u4e3a5\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c\u5b9e\u9645\u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528KeyStoreExplorer\uff08\u6216\u8005\u4f7f\u7528\u4ee3\u7801\uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66</p> <ol> <li>\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528kse\u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528<code>secp256r1</code>\uff09\u7684<code>jks</code>\u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362<code>jks/identity-net</code>\u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66</li> <li>\u4f7f\u7528<code>kse</code>\u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230<code>mytrustStore.jks</code>\u4e2d</li> <li>\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo</code>\uff0c\u91cd\u65b0\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09</li> </ol>"},{"location":"deploy/#_10","title":"\u2014\u2014\u591a\u94fe\u6a21\u5f0f\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1","text":"<p>\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1</p> <p></p> <p>1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB</p> <p>2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>rep.utils.CreateGenesisInfo4NoTransaction</code>\uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>json/credence-net/genesis.json</code>\uff08\u4e1a\u52a1\u94fe\uff09</p> <ul> <li>RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883</li> </ul> <p>\u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c<code>NAT</code>\u6216<code>docker</code>\u73af\u5883</p> <ul> <li>RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883</li> </ul> <p>\u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker</p> <ul> <li>\u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f</li> </ul> <p>\u4f7f\u7528<code>jar</code>\u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a</p> <ul> <li>RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f</li> </ul> <p>\u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1</p> <p>1.\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6</p> <p>2.\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a</p> <p>3.\u8282\u70b9\u7ba1\u7406\u670d\u52a1</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b</p>"},{"location":"deploy/#_11","title":"\u7f16\u8bd1\u6253\u5305","text":"<ul> <li>\u73af\u5883\u9700\u6c42\uff1a</li> </ul> <p>1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G</p> <p>\u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684\u57fa\u7840\u8fd0\u884c\u73af\u5883\u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09</p> <p>2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350Azul-zuluJdk\uff0c\u4e5f\u53ef\u4f7f\u7528Oracle-Jdk</p> <p>3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf</p> <p>4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd</p> <p>5.Git\uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d\u538b\u7f29\u5305\uff09</p> <p>6.\u7f16\u8bd1\u5de5\u5177\uff1aSbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1\u5b98\u65b9\u6559\u7a0b\uff1b\u6216 \u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u7684IDEA\uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1\u5b98\u65b9\u6559\u7a0b</p> <ul> <li>\u4e0b\u8f7d\u6e90\u7801\uff1a</li> </ul> <p>1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>   git clone https://gitee.com/BTAJL/repchain.git\n   cd repchain\n   git fetch\n   git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC\n</code></pre> <p>\u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u538b\u7f29\u5305\uff0c\u5e76\u89e3\u538b\u4e3arepchain</p> <p>2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684<code>mainClass</code>\uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.Repchain</code>\uff08\u4e3b\u7c7b<code>rep.app.Repchain</code>\u4e2d\u9ed8\u8ba4\u53ea\u6709node1-node5\u51715\u4e2a\u8282\u70b9\uff0c\u591a\u94fe\u6a21\u5f0f\u4e0b\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b<code>rep.app.RepChain</code>\u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.Repchain_Single</code>\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.RepChain_Management</code>\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>   # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\nmainClass in (Compile, packageBin) := Some(\"rep.app.Repchain\")\n# \u6216\n# \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\nmainClass in (Compile, packageBin) := Some(\"rep.app.Repchain_Single\")\n# \u6216\n# \u8282\u70b9\u7ba1\u7406\u670d\u52a1\nmainClass in (Compile, packageBin) := Some(\"rep.app.RepChain_Management\")\n</code></pre> <p>RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684<code>leveldbjni</code>\u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684<code>leveldb-jni</code>\u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e<code>leveldb-jni</code>\u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>   # \u5c06\nlibraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\"\n# \u66ff\u6362\u4e3a\nlibraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\"\n# \u6216\nlibraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\"\n</code></pre> <p>3.\u7f16\u8bd1\u5e76\u6253\u5305</p> <p>\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528<code>sbt-shell</code>\uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528<code>sbt-repl</code>\uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a</p> <ul> <li>\u5728IDEA\u4e2d\u6253\u5f00<code>sbt shell</code>\u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean-&gt;compile-&gt;assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a</li> </ul> <pre><code>       sbt:RepChain&gt; clean sbt:RepChain&gt; compile sbt:RepChain&gt; assembly\n</code></pre> <ul> <li>\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528<code>sbt-repl</code>\uff0c\u8f93\u5165<code>sbt</code>\u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a</li> </ul> <pre><code>       &gt; clean &gt; compile &gt; assembly\n</code></pre> <p>4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728<code>repchain/target/scala-2.12/RepChain.jar</code>\uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b</p> <ul> <li>\u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a</li> </ul> <p>1.\u4f7f\u7528IDEA\u4e2d\u7684<code>sbt-shell</code></p> <p></p> <p>2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09</p> <p></p>"},{"location":"deploy/#_12","title":"\u90e8\u7f72","text":"<p>\u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd</p>"},{"location":"deploy/#_13","title":"\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9","text":"<p>\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe5\u8282\u70b9\u548c\u4e1a\u52a1\u94fe5\u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.Repchain</code></p> <p></p> <ul> <li> <p>\u73af\u5883\u9700\u6c42\uff1a</p> <ul> <li>\u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G</li> <li>Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350Azul-zuluJdk\uff0c\u4e5f\u53ef\u4f7f\u7528Oracle-Jdk</li> </ul> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6</p> </li> </ul> <p>\u8eab\u4efd\u94fe\u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a<code>repchain/conf/121000005l35120456.node1/system.conf</code></p> <ul> <li><code>system.conf</code>\u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879<ul> <li>1.<code>chain_cert_name = \"identity-net:951002007l78123233.super_admin\"</code>\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5<code>identity-net</code>\u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin</li> <li>2.<code>chain_network_id = \"identity-net\"</code>\uff0c\u7ec4\u7f51id\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4e3a<code>identity-net</code>\uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26</li> <li>3.<code>basic_chain_id = \"identity-net\"</code>\uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a<code>identity-net</code>\uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406</li> <li>4.<code>system.httpServicePort= 9081</code> \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3</li> <li>5.<code>system.contractOperationMode = 1</code>\uff0c\u4ee5<code>jar</code>\u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1</li> <li>6.<code>system.trans_create_type=0</code> \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09</li> <li>7.<code>sytetem.storage.dbpath</code>\uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684</li> <li>8.<code>sytetem.storage.blockpath</code>\uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684</li> </ul> </li> </ul> <p>\u4e1a\u52a1\u94fe\u4ee5node6\u4e3a\u4f8b\uff08node7-node10\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a<code>repchain/conf/330597659476689954.node6/system.conf</code></p> <ul> <li> <p><code>system.conf</code>\u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879</p> <ul> <li>1.<code>chain_cert_name = \"credence-net:951002007l78123233.super_admin\"</code>\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5<code>credence-net</code>\u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin</li> <li>2.<code>chain_network_id = \"credence-net\"</code>\uff0c\u7ec4\u7f51id\uff0c\u4e1a\u52a1\u94fe\u8bbe\u7f6e\u4e3a<code>credence-net</code>\uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26</li> <li>3.<code>basic_chain_id = \"identity-net\"</code>\uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a<code>identity-net</code>\uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406</li> <li>4.<code>system.httpServicePort= 9086</code> \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3</li> <li>5.<code>system.contractOperationMode = 1</code>\uff0c\u4ee5<code>jar</code>\u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1</li> <li>6.<code>system.trans_create_type=0</code> \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09</li> <li>7.<code>sytetem.storage.dbpath</code>\uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684</li> <li>8.<code>sytetem.storage.blockpath</code>\uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684</li> </ul> </li> <li> <p>\u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</p> </li> </ul> <pre><code># \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b\njava -jar RepChain.jar\n</code></pre> <p>\u6216</p> <pre><code># \u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.Repchain\n</code></pre> <ul> <li> <p>\u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f</p> <ul> <li>\u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165<code>http://localhost:9081/chaininfo/node</code>\uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165<code>curl http://localhost:9081/chaininfo/node</code>\uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f</li> </ul> <p></p> <ul> <li>\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165<code>http://localhost:9081/web/g1.html</code>\uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f</li> </ul> <p></p> </li> <li> <p>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898</p> <ul> <li>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a<ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650</li> </ul> </li> </ul> </li> <li> <p>\u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e10\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe6~N\u8282\u70b9\u6216\u8005\u4e1a\u52a1\u94fe6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b<code>rep.app.RepChain</code>\u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b</p> <ul> <li>\u51c6\u5907\u5de5\u4f5c</li> </ul> <p>1.<code>jks/identity-net</code>\u6216\u8005<code>jks/credence-net</code>\u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528Kse\u6216\u8005\u4ee3\u7801\u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c<code>***.nodex</code>\uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b</p> <p></p> <p></p> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u8eab\u4efd\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u4e1a\u52a1\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node6-node10\u8fdb\u884c\u914d\u7f6e\u3002</p> <p>3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b<code>rep.app.RepChain</code>\u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b\u3002</p> <ul> <li>\u542f\u52a8\u65b9\u5f0f</li> </ul> <p>\u8bf7\u67e5\u770b\u6e90\u7801<code>src/main/scala/rep/app/RepChain.scala</code></p> <pre><code>    java -cp RepChain.jar rep.app.RepChain\n</code></pre> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a10\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u65b0\u589e\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66</p> <p></p>"},{"location":"deploy/#_14","title":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9","text":"<p>\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u542f\u52a82\u4e2a\u8282\u70b9\u5206\u522b\u53c2\u4e0e\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.Repchain_Single</code></p> <p></p> <ul> <li> <p>\u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f</p> <ul> <li> <p>\u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4</p> </li> <li> <p>\u542f\u52a8\u65b9\u5f0f\u4ee5\u8eab\u4efd\u94fe\u8282\u70b9node1\u548c\u4e1a\u52a1\u94fe\u8282\u70b9node6\u4e3a\u4f8b\uff0cnode1\u548cnode6\u9700\u8981\u90e8\u7f72\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0cnode1\u548cnode6\u7684LevelDB\uff08<code>system.conf</code>\u4e2d<code>sytetem.storage.dbpath</code>\u548c<code>sytetem.storage.blockpath</code>\uff09\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff1a</p> <ul> <li>\u5728node1\u548cnode6\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</li> </ul> </li> </ul> <pre><code>    java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\"\n# \u6216\u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\" \"330597659476689954.node6\" </code></pre> </li> <li> <p>ip\u4e0eport\u7684\u914d\u7f6e</p> <ul> <li>\u975eNAT\u6216\u975edocker\u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>    remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"192.168.2.136\"    # \u5c40\u57df\u7f51ip\ncanonical.port = 8082                   # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\\&lt;seed-nodes&gt;\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p>\u6ce8\uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879\\&lt;seed-nodes&gt;\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879\\&lt;seed-nodes&gt;\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3</p> <p></p> <p></p> <p></p> <ul> <li>NAT\u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>      remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"139.10.1.3\"     # \u5916\u90e8\u5730\u5740\ncanonical.port = 8082                 # \u5916\u90e8\u7aef\u53e3\nbind.hostname = \"192.168.2.136\"       # \u5c40\u57df\u7f51\u5730\u5740\nbind.port = 8082                      # \u5c40\u57df\u7f51\u7aef\u53e3\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e861\u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684\u5185\u90e8\u6216\u5916\u90e8\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p></p> <p></p> <p></p> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5<code>node1</code>\u548c<code>node6</code>\u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4</p> <p></p> <ul> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898<ul> <li>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</li> <li>\u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5<ul> <li>\u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3</li> <li>\u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25</li> </ul> </li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0<ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650</li> </ul> </li> </ul> </li> </ul>"},{"location":"deploy/#_15","title":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1","text":"<p>\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.RepChain_Management</code></p> <p></p> <ul> <li> <p>\u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f</p> <ul> <li> <p>\u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe5\u8282\u70b9\u548c\u4e1a\u52a1\u94fe5\u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9</p> </li> <li> <p>\u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c\u4e00\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4</p> </li> </ul> </li> <li> <p>\u542f\u52a8\u65b9\u5f0f</p> <ul> <li>\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1\u548cnode6\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</li> </ul> <pre><code>  java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.RepChain_Management \"121000005l35120456.node1\" \"330597659476689954.node6\" </code></pre> </li> <li> <p>ip\u4e0eport\u7684\u914d\u7f6e</p> <ul> <li>\u975eNAT\u6216\u975edocker\u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>  remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"192.168.2.136\"      # \u5c40\u57df\u7f51ip\ncanonical.port = 8082                 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9&lt;seed-nodes&gt;\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p>\u6ce8\uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879&lt;seed-nodes&gt;\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879&lt;seed-nodes&gt;\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3</p> <p></p> <p></p> <p></p> <ul> <li>NAT\u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>    remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"139.10.1.3\"    # \u5916\u90e8\u5730\u5740\ncanonical.port = 8082                    # \u5916\u90e8\u7aef\u53e3\nbind.hostname = \"192.168.2.136\"      # \u5c40\u57df\u7f51\u5730\u5740\nbind.port = 8082                        # \u5c40\u57df\u7f51\u7aef\u53e3\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e861\u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684\u5185\u90e8\u6216\u5916\u90e8\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p></p> <p></p> <p></p> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5<code>node1</code>\u548c<code>node6</code>\u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4</p> <p></p> <ul> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898<ul> <li>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</li> <li>\u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5<ul> <li>\u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3</li> <li>\u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25</li> </ul> </li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0<ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650</li> </ul> </li> </ul> </li> </ul>"},{"location":"deploy/#_16","title":"\u9644\u5f55","text":""},{"location":"deploy/#_17","title":"\u521b\u4e16\u5757\u7684\u6784\u5efa","text":"<p>\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>rep.utils.CreateGenesisInfo4NoTransaction</code>\uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>json/credence-net/genesis.json</code>\uff08\u4e1a\u52a1\u94fe\uff09</p>"},{"location":"deploy/#_18","title":"\u8282\u70b9\u5bc6\u94a5\u66ff\u6362","text":"<p>\u9ed8\u8ba4\u4e3a5\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c5\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c\u5b9e\u9645\u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528KeyStoreExplorer\uff08\u6216\u8005\u4f7f\u7528\u4ee3\u7801\uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66</p> <ul> <li> <p>\u5bf9\u4e8e\u8eab\u4efd\u94fe</p> <ul> <li>1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528kse\u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528<code>secp256r1</code>\uff09\u7684<code>jks</code>\u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362<code>jks/identity-net</code>\u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66</li> <li>2.\u4f7f\u7528<code>kse</code>\u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230<code>mytrustStore.jks</code>\u4e2d</li> <li>3.\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo</code>\uff0c\u91cd\u65b0\u751f\u6210\u7684\u8eab\u4efd\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09</li> </ul> </li> <li> <p>\u5bf9\u4e8e\u4e1a\u52a1\u94fe</p> <ul> <li>1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528kse\u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528<code>secp256r1</code>\uff09\u7684<code>jks</code>\u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362<code>jks/credence-net</code>\u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66</li> <li>2.\u4f7f\u7528<code>kse</code>\u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230<code>mytrustStore.jks</code>\u4e2d</li> <li>3.\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.CreateGenesisInfo4NoTransaction</code>\uff0c\u91cd\u65b0\u751f\u6210\u7684\u4e1a\u52a1\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728<code>json/credence-net/genesis.json</code>\uff08\u4e1a\u52a1\u94fe\uff09</li> </ul> </li> </ul>"},{"location":"deploy/#_19","title":"\u2014\u2014\u591a\u94fe\u6a21\u5f0f\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1","text":"<p>\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1</p> <p></p> <p>1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB</p> <p>2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.identity.CreateIdentityGenesisInfo</code> \uff08\u8eab\u4efd\u94fe\uff09 \u548c<code>rep.utils.credence.CreateCredenceGenesisInfo</code>\uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>json/credence-net/genesis.json</code>\uff08\u4e1a\u52a1\u94fe\uff09</p> <ul> <li>RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883</li> </ul> <p>\u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c<code>NAT</code>\u6216<code>docker</code>\u73af\u5883</p> <ul> <li>RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883</li> </ul> <p>\u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker</p> <ul> <li>\u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f</li> </ul> <p>\u4f7f\u7528<code>jar</code>\u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a</p> <ul> <li>RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f</li> </ul> <p>\u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1</p> <ol> <li> <p>\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6</p> </li> <li> <p>\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a</p> </li> <li> <p>\u8282\u70b9\u7ba1\u7406\u670d\u52a1</p> <p>\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b</p> </li> </ol>"},{"location":"deploy/#_20","title":"\u7f16\u8bd1\u6253\u5305","text":"<ul> <li>\u73af\u5883\u9700\u6c42\uff1a</li> </ul> <p>1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G</p> <p>\u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684\u57fa\u7840\u8fd0\u884c\u73af\u5883\u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09</p> <p>2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350Azul-zuluJdk\uff0c\u4e5f\u53ef\u4f7f\u7528Oracle-Jdk</p> <p>3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf</p> <p>4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd</p> <p>5.Git\uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d\u538b\u7f29\u5305\uff09</p> <p>6.\u7f16\u8bd1\u5de5\u5177\uff1aSbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1\u5b98\u65b9\u6559\u7a0b\uff1b\u6216 \u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u7684IDEA\uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1\u5b98\u65b9\u6559\u7a0b</p> <ul> <li>\u4e0b\u8f7d\u6e90\u7801\uff1a</li> </ul> <p>1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>   git clone https://gitee.com/BTAJL/repchain.git\n   cd repchain\n   git fetch\n   git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC\n</code></pre> <p>\u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u538b\u7f29\u5305\uff0c\u5e76\u89e3\u538b\u4e3arepchain</p> <p>2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684<code>mainClass</code>\uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.Repchain</code>\uff08\u4e3b\u7c7b<code>rep.app.Repchain</code>\u4e2d\u9ed8\u8ba4\u53ea\u6709node1-node5\u51715\u4e2a\u8282\u70b9\uff0c\u591a\u94fe\u6a21\u5f0f\u4e0b\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b<code>rep.app.RepChain</code>\u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.Repchain_Single</code>\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5219\u4fee\u6539\u4e3a<code>rep.app.RepChain_Management</code>\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>   # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\nmainClass in (Compile, packageBin) := Some(\"rep.app.Repchain\")\n# \u6216\n# \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\nmainClass in (Compile, packageBin) := Some(\"rep.app.Repchain_Single\")\n# \u6216\n# \u8282\u70b9\u7ba1\u7406\u670d\u52a1\nmainClass in (Compile, packageBin) := Some(\"rep.app.RepChain_Management\")\n</code></pre> <p>RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684<code>leveldbjni</code>\u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684<code>leveldb-jni</code>\u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e<code>leveldb-jni</code>\u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>   # \u5c06\nlibraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\"\n# \u66ff\u6362\u4e3a\nlibraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\"\n# \u6216\nlibraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\"\n</code></pre> <p>3.\u7f16\u8bd1\u5e76\u6253\u5305</p> <p>\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528<code>sbt-shell</code>\uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528<code>sbt-repl</code>\uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a</p> <ul> <li>\u5728IDEA\u4e2d\u6253\u5f00<code>sbt shell</code>\u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean-&gt;compile-&gt;assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a</li> </ul> <pre><code>     sbt:RepChain&gt; clean sbt:RepChain&gt; compile sbt:RepChain&gt; assembly\n</code></pre> <ul> <li>\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528<code>sbt-repl</code>\uff0c\u8f93\u5165<code>sbt</code>\u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a</li> </ul> <pre><code>     &gt; clean &gt; compile &gt; assembly\n</code></pre> <p>4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728<code>repchain/target/scala-2.12/RepChain.jar</code>\uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b</p> <ul> <li>\u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a</li> </ul> <p>1.\u4f7f\u7528IDEA\u4e2d\u7684<code>sbt-shell</code></p> <p></p> <p>2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09</p> <p></p>"},{"location":"deploy/#_21","title":"\u90e8\u7f72","text":"<p>\u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd</p>"},{"location":"deploy/#_22","title":"\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9","text":"<p>\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe5\u8282\u70b9\u548c\u4e1a\u52a1\u94fe5\u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.Repchain</code></p> <p></p> <ul> <li> <p>\u73af\u5883\u9700\u6c42\uff1a</p> <ul> <li>\u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G</li> <li>Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350Azul-zuluJdk\uff0c\u4e5f\u53ef\u4f7f\u7528Oracle-Jdk</li> </ul> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6</p> </li> </ul> <p>\u8eab\u4efd\u94fe\u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a<code>repchain/conf/121000005l35120456.node1/system.conf</code></p> <ul> <li><code>system.conf</code>\u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879<ul> <li>1.<code>chain_cert_name = \"identity-net:951002007l78123233.super_admin\"</code>\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5<code>identity-net</code>\u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin</li> <li>2.<code>chain_network_id = \"identity-net\"</code>\uff0c\u7ec4\u7f51id\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4e3a<code>identity-net</code>\uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26</li> <li>3.<code>basic_chain_id = \"identity-net\"</code>\uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a<code>identity-net</code>\uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406</li> <li>4.<code>system.httpServicePort= 9081</code> \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3</li> <li>5.<code>system.contractOperationMode = 1</code>\uff0c\u4ee5<code>jar</code>\u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1</li> <li>6.<code>system.trans_create_type=0</code> \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09</li> <li>7.<code>sytetem.storage.dbpath</code>\uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684</li> <li>8.<code>sytetem.storage.blockpath</code>\uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684</li> </ul> </li> </ul> <p>\u4e1a\u52a1\u94fe\u4ee5node6\u4e3a\u4f8b\uff08node7-node10\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a<code>repchain/conf/330597659476689954.node6/system.conf</code></p> <ul> <li> <p><code>system.conf</code>\u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879</p> <ul> <li>1.<code>chain_cert_name = \"credence-net:951002007l78123233.super_admin\"</code>\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5<code>credence-net</code>\u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin</li> <li>2.<code>chain_network_id = \"credence-net\"</code>\uff0c\u7ec4\u7f51id\uff0c\u4e1a\u52a1\u94fe\u8bbe\u7f6e\u4e3a<code>credence-net</code>\uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26</li> <li>3.<code>basic_chain_id = \"identity-net\"</code>\uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a<code>identity-net</code>\uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406</li> <li>4.<code>system.httpServicePort= 9086</code> \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3</li> <li>5.<code>system.contractOperationMode = 1</code>\uff0c\u4ee5<code>jar</code>\u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1</li> <li>6.<code>system.trans_create_type=0</code> \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09</li> <li>7.<code>sytetem.storage.dbpath</code>\uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684</li> <li>8.<code>sytetem.storage.blockpath</code>\uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684</li> </ul> </li> <li> <p>\u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</p> </li> </ul> <pre><code>  # \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b\njava -jar RepChain.jar\n</code></pre> <p>\u6216</p> <pre><code>  # \u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.Repchain\n</code></pre> <ul> <li> <p>\u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f</p> <ul> <li>\u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165<code>http://localhost:9081/chaininfo/node</code>\uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165<code>curl http://localhost:9081/chaininfo/node</code>\uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f</li> </ul> <p></p> <ul> <li>\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165<code>http://localhost:9081/web/g1.html</code>\uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f</li> </ul> <p></p> </li> <li> <p>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898</p> <ul> <li>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a<ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650</li> </ul> </li> </ul> </li> <li> <p>\u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e10\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe6~N\u8282\u70b9\u6216\u8005\u4e1a\u52a1\u94fe6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b<code>rep.app.RepChain</code>\u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b</p> <ul> <li>\u51c6\u5907\u5de5\u4f5c</li> </ul> <p>1.<code>jks/identity-net</code>\u6216\u8005<code>jks/credence-net</code>\u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528Kse\u6216\u8005\u4ee3\u7801\u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c<code>***.nodex</code>\uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b</p> <p></p> <p></p> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u8eab\u4efd\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u4e1a\u52a1\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node6-node10\u8fdb\u884c\u914d\u7f6e\u3002</p> <p>3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b<code>rep.app.RepChain</code>\u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b\u3002</p> <ul> <li>\u542f\u52a8\u65b9\u5f0f</li> </ul> <p>\u8bf7\u67e5\u770b\u6e90\u7801<code>src/main/scala/rep/app/RepChain.scala</code></p> <pre><code> java -cp RepChain.jar rep.app.RepChain\n</code></pre> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a10\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u65b0\u589e\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66</p> <p></p>"},{"location":"deploy/#_23","title":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9","text":"<p>\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u542f\u52a82\u4e2a\u8282\u70b9\u5206\u522b\u53c2\u4e0e\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.Repchain_Single</code></p> <p></p> <ul> <li> <p>\u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f</p> <ul> <li> <p>\u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4</p> </li> <li> <p>\u542f\u52a8\u65b9\u5f0f\u4ee5\u8eab\u4efd\u94fe\u8282\u70b9node1\u548c\u4e1a\u52a1\u94fe\u8282\u70b9node6\u4e3a\u4f8b\uff0cnode1\u548cnode6\u9700\u8981\u90e8\u7f72\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0cnode1\u548cnode6\u7684LevelDB\uff08<code>system.conf</code>\u4e2d<code>sytetem.storage.dbpath</code>\u548c<code>sytetem.storage.blockpath</code>\uff09\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff1a</p> <ul> <li>\u5728node1\u548cnode6\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</li> </ul> </li> </ul> <pre><code>    java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\"\n# \u6216\u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\" \"330597659476689954.node6\" </code></pre> </li> <li> <p>ip\u4e0eport\u7684\u914d\u7f6e</p> <ul> <li>\u975eNAT\u6216\u975edocker\u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>  remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"192.168.2.136\"    # \u5c40\u57df\u7f51ip\ncanonical.port = 8082                   # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9&lt;seed-nodes&gt;\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p>\u6ce8\uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879&lt;seed-nodes&gt;\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879&lt;seed-nodes&gt;\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3</p> <p></p> <p></p> <p></p> <ul> <li>NAT\u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>  remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"139.10.1.3\"    # \u5916\u90e8\u5730\u5740\ncanonical.port = 8082                    # \u5916\u90e8\u7aef\u53e3\nbind.hostname = \"192.168.2.136\"     # \u5c40\u57df\u7f51\u5730\u5740\nbind.port = 8082                     # \u5c40\u57df\u7f51\u7aef\u53e3\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e861\u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684\u5185\u90e8\u6216\u5916\u90e8\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p></p> <p></p> <p></p> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5<code>node1</code>\u548c<code>node6</code>\u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4</p> <p></p> <ul> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898<ul> <li>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</li> <li>\u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5<ul> <li>\u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3</li> <li>\u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25</li> </ul> </li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0<ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650</li> </ul> </li> </ul> </li> </ul>"},{"location":"deploy/#_24","title":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1","text":"<p>\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a<code>rep.app.RepChain_Management</code></p> <p></p> <ul> <li> <p>\u7f51\u7edc\u90e8\u7f72</p> <ul> <li> <p>\u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe5\u8282\u70b9\u548c\u4e1a\u52a1\u94fe5\u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a<code>Jvm</code>\u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9</p> </li> <li> <p>\u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c\u4e00\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4</p> </li> </ul> </li> <li> <p>\u542f\u52a8\u65b9\u5f0f</p> <ul> <li>\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1\u548cnode6\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a</li> </ul> <pre><code>   java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b\njava -cp RepChain.jar rep.app.RepChain_Management \"121000005l35120456.node1\" \"330597659476689954.node6\" </code></pre> </li> <li> <p>ip\u4e0eport\u7684\u914d\u7f6e</p> <ul> <li>\u975eNAT\u6216\u975edocker\u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>  remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"192.168.2.136\"    # \u5c40\u57df\u7f51ip\ncanonical.port = 8082                   # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\\&lt;seed-nodes&gt;\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p>\u6ce8\uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879\\&lt;seed-nodes&gt;\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879\\&lt;seed-nodes&gt;\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3</p> <p></p> <p></p> <p></p> <ul> <li>NAT\u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a</li> </ul> <pre><code>  remote {\n#artery\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3\nartery {\ncanonical.hostname = \"139.10.1.3\"   # \u5916\u90e8\u5730\u5740\ncanonical.port = 8082                   # \u5916\u90e8\u7aef\u53e3\nbind.hostname = \"192.168.2.136\"        # \u5c40\u57df\u7f51\u5730\u5740\nbind.port = 8082                       # \u5c40\u57df\u7f51\u7aef\u53e3\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e861\u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684\u5185\u90e8\u6216\u5916\u90e8\u7684<code>hostname</code>\u4e0e<code>port</code>\uff09</p> <p></p> <p></p> <p></p> </li> <li> <p>jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5<code>node1</code>\u548c<code>node6</code>\u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a</p> </li> </ul> <p>\u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4</p> <p></p> <ul> <li>\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898<ul> <li>leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5Microsoft Visual C++ 2010 x64 Redistributable\u5373\u53ef</li> <li>\u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5<ul> <li>\u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3</li> <li>\u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25</li> </ul> </li> <li>\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a<ul> <li>\u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879<code>diskspaceManager.diskspacealarm</code></li> <li>\u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 </li> </ul> </li> </ul> </li> </ul>"},{"location":"deploy/#_25","title":"\u9644\u5f55","text":""},{"location":"deploy/#_26","title":"\u521b\u4e16\u5757\u7684\u6784\u5efa","text":"<p>\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.identity.CreateIdentityGenesisInfo</code> \uff08\u8eab\u4efd\u94fe\uff09 \u548c<code>rep.utils.credence.CreateCredenceGenesisInfo</code>\uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09\u548c<code>json/credence-net/genesis.json</code>\uff08\u4e1a\u52a1\u94fe\uff09</p>"},{"location":"deploy/#_27","title":"\u8282\u70b9\u5bc6\u94a5\u66ff\u6362","text":"<p>\u9ed8\u8ba4\u4e3a5\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c5\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c\u5b9e\u9645\u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528KeyStoreExplorer\uff08\u6216\u8005\u4f7f\u7528\u4ee3\u7801\uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66</p> <ul> <li> <p>\u5bf9\u4e8e\u8eab\u4efd\u94fe</p> <ul> <li>1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528kse\u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528<code>secp256r1</code>\uff09\u7684<code>jks</code>\u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362<code>jks/identity-net</code>\u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66</li> <li>2.\u4f7f\u7528<code>kse</code>\u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230<code>mytrustStore.jks</code>\u4e2d</li> <li>3.\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.identity.CreateIdentityGenesisInfo</code>\uff0c\u91cd\u65b0\u751f\u6210\u7684\u8eab\u4efd\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728<code>json/identity-net/genesis.json</code>\uff08\u8eab\u4efd\u94fe\uff09</li> </ul> </li> <li> <p>\u5bf9\u4e8e\u4e1a\u52a1\u94fe</p> <ul> <li>1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528kse\u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528<code>secp256r1</code>\uff09\u7684<code>jks</code>\u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362<code>jks/credence-net</code>\u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66</li> <li>2.\u4f7f\u7528<code>kse</code>\u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230<code>mytrustStore.jks</code>\u4e2d</li> <li>3.\u8fd0\u884c<code>src/main/scala</code>\u76ee\u5f55\u4e0b<code>rep.utils.credence.CreateCredenceGenesisInfo</code>\uff0c\u91cd\u65b0\u751f\u6210\u7684\u4e1a\u52a1\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728<code>json/credence-net/genesis.json</code>\uff08\u4e1a\u52a1\u94fe\uff09</li> </ul> </li> </ul>"}]}